<!DOCTYPE html>
<html lang="en">
  <head>
<meta charset="utf-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
/>
<meta
  name="description"
  content="Design and implement your programming language and software analysis tools with mathematical rigor."
/>
<meta name="keywords" content="runtime, verification, rv, k" />
<meta name="author" content="IELE Semantics | Runtime Verification Inc" />
<meta name="robots" content="index, follow" />

<!--favicon icon-->
<link rel="icon" type="image/png" href="../assets/img/favicon.ico" />

<title>IELE Semantics | Runtime Verification Inc</title>

<!-- <base href="/k/" /> -->

<!--web fonts-->
<link
  href="https://fonts.googleapis.com/css?family=Nunito:300,400,600,700,800"
  rel="stylesheet"
/>
<link
  href="https://fonts.googleapis.com/css?family=Lora:400i"
  rel="stylesheet"
/>

<link
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"
  rel="stylesheet"
/>

<link href="../assets/css/index.css" rel="stylesheet" />

<!--[if (gt IE 9) |!(IE)]><!-->
<!--<link rel="stylesheet" href="/assets/vendor/custom-nav/css/effects/fade-menu.css"/>-->
<!-- <link rel="stylesheet" href="../assets/k/vl-nav/css/effects/slide-menu.css" /> -->
<!--<![endif]-->

  </head>

  <body>
<header
  class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar"
>
  <a class="logo-link" href="../index.html"> IELE Semantics </a>
  <ul class="navbar-nav ml-md-auto">
    <li class="nav-item">
      <a
        class="nav-link pl-2 pr-1 mx-1 py-3 my-n2"
        href="https://github.com/runtimeverification/iele-semantics"
        target="_blank"
        rel="noopener"
        aria-label="GitHub"
      >
        <i class="fab fa-github"></i>
      </a>
    </li>
  </ul>
  <!--
  <a
    class="btn btn-rv-blue d-none d-lg-inline-block mb-3 mb-md-0 ml-md-3"
    href="../downloads"
    >Download</a
  >
  -->
</header>


    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 bd-sidebar mb-3">
  <form
    role="search"
    class="bd-search d-flex align-items-center justify-content-between"
  >
    <input
      type="search"
      class="form-control"
      placeholder="Search..."
      aria-label="Search for..."
      autocomplete="false"
      id="search-box"
    />
    <button
      class="btn bd-search-docs-toggle d-md-none p-0 ml-3 collapsed"
      type="button"
      aria-label="Toggle docs navigation"
      style="font-size: 1.4rem"
    >
      <i class="fas fa-bars"></i>
    </button>
  </form>
  <nav class="collapse bd-links" aria-label="Main navigation">
    <div class="bd-toc-item">
      <a class="bd-toc-link" href="../">Homepage</a>
      <a class="bd-toc-link" href="../INSTALL">Install</a>
      <a class="bd-toc-link" href="../Design">Design</a>
    </div>
  </nav>
</div>

        <main
          class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content"
          role="main"
        >
          <div class="markdown-preview"><html><head></head><body><h1 id="iele-contract-well-formedness">IELE Contract Well-Formedness</h1>
<p>The following document describes a semantics of type- and semantic-checking in IELE. The semantics takes a contract as input and succeeds only if the contract is determined to be well-formed, i.e., free from type errors and malformed instructions or functions.</p>
<pre class="language-k"><code><span class="token keyword">require</span> <span class="token string">&quot;iele-syntax.md&quot;</span>
<span class="token keyword">require</span> <span class="token string">&quot;data.md&quot;</span>
</code></pre>
<h2 id="modal-semantics">Modal Semantics</h2>
<p>Our semantics is modal, with the initial mode being set on the command line via <code>-cMODE=EXECMODE</code>.</p>
<ul>
<li><code>NORMAL</code> executes as a client on the network would.</li>
<li><code>VMTESTS</code> skips <code>call*</code> and <code>create*</code> operations.</li>
</ul>
<pre class="language-k"><code><span class="token keyword">module</span> IELE<span class="token operator">-</span>CONSTANTS
    <span class="token keyword">syntax</span> Mode <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> <span class="token string">&quot;NORMAL&quot;</span> <span class="token punctuation">[</span><span class="token class-name">klabel</span><span class="token punctuation">(</span>NORMAL<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">symbol</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token string">&quot;VMTESTS&quot;</span> <span class="token punctuation">[</span><span class="token class-name">klabel</span><span class="token punctuation">(</span>VMTESTS<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">symbol</span><span class="token punctuation">]</span>
    <span class="token keyword">syntax</span> Schedule <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> <span class="token string">&quot;ALBE&quot;</span> <span class="token punctuation">[</span><span class="token class-name">klabel</span><span class="token punctuation">(</span>ALBE<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">symbol</span><span class="token punctuation">]</span>
                      <span class="token operator">|</span> <span class="token string">&quot;DANSE&quot;</span> <span class="token punctuation">[</span><span class="token class-name">klabel</span><span class="token punctuation">(</span>DANSE<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">symbol</span><span class="token punctuation">]</span>
<span class="token keyword">endmodule</span>


<span class="token keyword">module</span> IELE<span class="token operator">-</span>WELL<span class="token operator">-</span>FORMEDNESS
    <span class="token keyword">imports</span> IELE<span class="token operator">-</span>COMMON
    <span class="token keyword">imports</span> IELE<span class="token operator">-</span>DATA
    <span class="token keyword">imports</span> IELE<span class="token operator">-</span>CONSTANTS
    <span class="token keyword">imports</span> DEFAULT<span class="token operator">-</span>CONFIGURATION
</code></pre>
<h2 id="configuration">Configuration</h2>
<p>The semantic checker for IELE has its own configuration separate from the configuration of execution. This is consistent with the semantics of other languages defined in K, which can have separate compile-time and execution-time semantics.</p>
<pre class="language-k"><code>    <span class="token keyword">syntax</span> IeleNameToken <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> <span class="token string">&quot;Main&quot;</span> <span class="token punctuation">[</span><span class="token class-name">token</span><span class="token punctuation">]</span>
    <span class="token keyword">syntax</span> Schedule

    <span class="token keyword">configuration</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>well-formedness</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeChecking</span><span class="token punctuation">&gt;</span></span> <span class="token boolean">false</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeChecking</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>well-formedness-schedule</span><span class="token punctuation">&gt;</span></span> $SCHEDULE<span class="token punctuation">:</span>Schedule <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>well-formedness-schedule</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contracts</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span>Set <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contracts</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>currentContract</span><span class="token punctuation">&gt;</span></span>
                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>types</span><span class="token punctuation">&gt;</span></span> intrinsicTypes <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>types</span><span class="token punctuation">&gt;</span></span>
                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contractName</span><span class="token punctuation">&gt;</span></span> Main <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contractName</span><span class="token punctuation">&gt;</span></span>
                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>declaredContracts</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span>Set <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>declaredContracts</span><span class="token punctuation">&gt;</span></span>
                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>functionBodies</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span>K <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>functionBodies</span><span class="token punctuation">&gt;</span></span>
                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>currentFunction</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>functionName</span><span class="token punctuation">&gt;</span></span> deposit<span class="token punctuation">:</span>IeleName <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>functionName</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>labels</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span>Set <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>labels</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>currentInstructions</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span>K <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>currentInstructions</span><span class="token punctuation">&gt;</span></span>
                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>currentFunction</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>currentContract</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>well-formedness</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h2 id="types">Types</h2>
<p>IELE is a primarily untyped language, and therefore identifiers have one of two types: either an integer or a function.</p>
<pre class="language-k"><code>    <span class="token keyword">syntax</span> Type <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> <span class="token string">&quot;int&quot;</span> <span class="token operator">|</span> Types <span class="token string">&quot;-&gt;&quot;</span> ReturnType <span class="token punctuation">[</span><span class="token class-name">klabel</span><span class="token punctuation">(</span>funType<span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">syntax</span> Types <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> List<span class="token punctuation">{</span>Type<span class="token punctuation">,</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">[</span><span class="token class-name">klabel</span><span class="token punctuation">(</span>typeList<span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">syntax</span> ReturnType <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> Types <span class="token operator">|</span> <span class="token string">&quot;unknown&quot;</span>
    <span class="token keyword">syntax priorities</span> typeList &gt; funType

    <span class="token keyword">syntax</span> Types <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> ints<span class="token punctuation">(</span><span class="token keyword">Int</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
 <span class="token comment">// -------------------------------------</span>
    <span class="token keyword">rule</span> ints<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">.</span>Types
    <span class="token keyword">rule</span> ints<span class="token punctuation">(</span>N<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> int <span class="token punctuation">,</span> ints<span class="token punctuation">(</span>N <span class="token operator">-</span><span class="token keyword">Int</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>owise<span class="token punctuation">]</span>
</code></pre>
<h2 id="contracts">Contracts</h2>
<pre class="language-k"><code>    <span class="token keyword">rule</span> CONTRACT1<span class="token punctuation">:</span><span class="token punctuation">:</span>ContractDefinition CONTRACT2<span class="token punctuation">:</span><span class="token punctuation">:</span>ContractDefinition CONTRACTS <span class="token operator">=&gt;</span> CONTRACT1 <span class="token operator">~&gt;</span> CONTRACT2 CONTRACTS
    <span class="token keyword">rule</span> CONTRACT<span class="token punctuation">:</span><span class="token punctuation">:</span>ContractDefinition <span class="token punctuation">.</span>Contract <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>CONTRACT<span class="token punctuation">:</span><span class="token punctuation">:</span>ContractDefinition <span class="token punctuation">:</span>KItem<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> contract NAME <span class="token punctuation">{</span> DEFINITIONS <span class="token punctuation">}</span> <span class="token operator">=&gt;</span> checkName<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> DEFINITIONS <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contracts</span><span class="token punctuation">&gt;</span></span> CONTRACTS <span class="token operator">=&gt;</span> CONTRACTS SetItem<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contracts</span><span class="token punctuation">&gt;</span></span>
         <span class="token punctuation">(</span>_<span class="token punctuation">:</span>CurrentContractCell <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>currentContract</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contractName</span><span class="token punctuation">&gt;</span></span> NAME <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contractName</span><span class="token punctuation">&gt;</span></span>
           <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>currentContract</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
      <span class="token keyword">requires</span> notBool NAME in CONTRACTS

    <span class="token keyword">rule</span> DEF<span class="token punctuation">:</span><span class="token punctuation">:</span>TopLevelDefinition DEFS <span class="token operator">=&gt;</span> DEF <span class="token operator">~&gt;</span> DEFS
    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span>TopLevelDefinitions <span class="token operator">=&gt;</span> BODIES <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>functionBodies</span><span class="token punctuation">&gt;</span></span> BODIES <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>functionBodies</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>types</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> init <span class="token operator">|</span><span class="token operator">-</span>&gt; _ <span class="token operator">-</span>&gt; <span class="token punctuation">.</span>Types <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>types</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h2 id="top-level-definitions">Top Level Definitions</h2>
<pre class="language-k"><code>    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> external contract NAME <span class="token operator">=&gt;</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contracts</span><span class="token punctuation">&gt;</span></span> CONTRACTS <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contracts</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>declaredContracts</span><span class="token punctuation">&gt;</span></span> DECLARED <span class="token operator">=&gt;</span> DECLARED SetItem<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>declaredContracts</span><span class="token punctuation">&gt;</span></span>
      <span class="token keyword">requires</span> NAME in CONTRACTS andBool notBool NAME in DECLARED

    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>@ NAME <span class="token operator">=</span> _<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token punctuation">:</span>GlobalDefinition <span class="token operator">=&gt;</span> checkName<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>types</span><span class="token punctuation">&gt;</span></span> TYPES <span class="token operator">=&gt;</span> TYPES NAME <span class="token operator">|</span><span class="token operator">-</span>&gt; int <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>types</span><span class="token punctuation">&gt;</span></span>
      <span class="token keyword">requires</span> notBool NAME in_keys<span class="token punctuation">(</span>TYPES<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> define @ init <span class="token punctuation">(</span> ARGS<span class="token punctuation">:</span><span class="token punctuation">:</span>FunctionParameters <span class="token punctuation">)</span> <span class="token punctuation">{</span> BLOCKS <span class="token punctuation">}</span> <span class="token operator">=&gt;</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>types</span><span class="token punctuation">&gt;</span></span> TYPES <span class="token operator">=&gt;</span> TYPES init <span class="token operator">|</span><span class="token operator">-</span>&gt; ints<span class="token punctuation">(</span>#sizeNames<span class="token punctuation">(</span>ARGS<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span>&gt; <span class="token punctuation">.</span>Types <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>types</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>functionBodies</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span>K <span class="token operator">=&gt;</span> processFunction<span class="token punctuation">(</span>init<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> BLOCKS <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>functionBodies</span><span class="token punctuation">&gt;</span></span>
      <span class="token keyword">requires</span> notBool init in_keys<span class="token punctuation">(</span>TYPES<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> define @ NAME <span class="token punctuation">(</span> ARGS<span class="token punctuation">:</span><span class="token punctuation">:</span>FunctionParameters <span class="token punctuation">)</span> <span class="token punctuation">{</span> BLOCKS <span class="token punctuation">}</span> <span class="token operator">=&gt;</span> checkName<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkArgs<span class="token punctuation">(</span>ARGS<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>types</span><span class="token punctuation">&gt;</span></span> TYPES <span class="token operator">=&gt;</span> TYPES NAME <span class="token operator">|</span><span class="token operator">-</span>&gt; <span class="token punctuation">(</span>ints<span class="token punctuation">(</span>#sizeNames<span class="token punctuation">(</span>ARGS<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span>&gt; unknown<span class="token punctuation">)</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>types</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>functionBodies</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span>K <span class="token operator">=&gt;</span> processFunction<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> BLOCKS <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>functionBodies</span><span class="token punctuation">&gt;</span></span>
      <span class="token keyword">requires</span> notBool NAME in_keys<span class="token punctuation">(</span>TYPES<span class="token punctuation">)</span> andBool NAME <span class="token operator">=</span><span class="token operator">/</span><span class="token operator">=</span>K init

    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> define public @ NAME <span class="token punctuation">(</span> ARGS<span class="token punctuation">:</span><span class="token punctuation">:</span>FunctionParameters <span class="token punctuation">)</span> <span class="token punctuation">{</span> BLOCKS <span class="token punctuation">}</span> <span class="token operator">=&gt;</span> checkName<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkArgs<span class="token punctuation">(</span>ARGS<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>types</span><span class="token punctuation">&gt;</span></span> TYPES <span class="token operator">=&gt;</span> TYPES NAME <span class="token operator">|</span><span class="token operator">-</span>&gt; ints<span class="token punctuation">(</span>#sizeNames<span class="token punctuation">(</span>ARGS<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span>&gt; unknown <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>types</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>functionBodies</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span>K <span class="token operator">=&gt;</span> processFunction<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> BLOCKS <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>functionBodies</span><span class="token punctuation">&gt;</span></span>
      <span class="token keyword">requires</span> notBool NAME in_keys<span class="token punctuation">(</span>TYPES<span class="token punctuation">)</span> andBool NAME <span class="token operator">=</span><span class="token operator">/</span><span class="token operator">=</span>K init

    <span class="token keyword">syntax</span> KItem <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> processFunction<span class="token punctuation">(</span>IeleName<span class="token punctuation">)</span>
 <span class="token comment">// ------------------------------------------</span>
    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> processFunction<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token punctuation">(</span>_<span class="token punctuation">:</span>CurrentFunctionCell <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>currentFunction</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>functionName</span><span class="token punctuation">&gt;</span></span> NAME <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>functionName</span><span class="token punctuation">&gt;</span></span>
           <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>currentFunction</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>

    <span class="token keyword">syntax</span> FunctionParameters <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> <span class="token keyword">Int</span>
    <span class="token keyword">syntax</span> <span class="token keyword">Int</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> #sizeNames<span class="token punctuation">(</span>FunctionParameters<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
 <span class="token comment">// --------------------------------------------------------</span>
    <span class="token keyword">rule</span> #sizeNames<span class="token punctuation">(</span>I<span class="token punctuation">:</span><span class="token keyword">Int</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> I
    <span class="token keyword">rule</span> #sizeNames<span class="token punctuation">(</span><span class="token punctuation">.</span>LocalNames<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span>
    <span class="token keyword">rule</span> #sizeNames<span class="token punctuation">(</span>N <span class="token punctuation">,</span> NAMES<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span> <span class="token operator">+</span><span class="token keyword">Int</span> #sizeNames<span class="token punctuation">(</span>NAMES<span class="token punctuation">)</span>

    <span class="token keyword">syntax</span> KItem <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> checkArgs<span class="token punctuation">(</span>FunctionParameters<span class="token punctuation">)</span>
                   <span class="token operator">|</span> checkNameArgs<span class="token punctuation">(</span>LocalNames<span class="token punctuation">)</span>
                   <span class="token operator">|</span> checkIntArgs<span class="token punctuation">(</span>LocalNames<span class="token punctuation">,</span> <span class="token keyword">Int</span><span class="token punctuation">)</span>
 <span class="token comment">// ----------------------------------------------</span>
    <span class="token keyword">rule</span> checkArgs<span class="token punctuation">(</span><span class="token punctuation">.</span>LocalNames<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">.</span>
    <span class="token keyword">rule</span> checkArgs<span class="token punctuation">(</span>_<span class="token punctuation">:</span><span class="token keyword">Int</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">.</span> 
    <span class="token keyword">rule</span> checkArgs<span class="token punctuation">(</span><span class="token operator">%</span> N<span class="token punctuation">:</span>NumericIeleName <span class="token punctuation">,</span> ARGS<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> checkIntArgs<span class="token punctuation">(</span><span class="token operator">%</span> N<span class="token punctuation">,</span> ARGS<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">rule</span> checkArgs<span class="token punctuation">(</span><span class="token operator">%</span> N<span class="token punctuation">,</span> ARGS<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> checkNameArgs<span class="token punctuation">(</span>ARGS<span class="token punctuation">)</span> <span class="token keyword">requires</span> notBool isNumericIeleName<span class="token punctuation">(</span>N<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> checkNameArgs<span class="token punctuation">(</span><span class="token operator">%</span> N<span class="token punctuation">,</span> ARGS<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> checkName<span class="token punctuation">(</span>N<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkNameArgs<span class="token punctuation">(</span>ARGS<span class="token punctuation">)</span> <span class="token keyword">requires</span> notBool isNumericIeleName<span class="token punctuation">(</span>N<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> checkNameArgs<span class="token punctuation">(</span><span class="token punctuation">.</span>LocalNames<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">.</span>

    <span class="token keyword">rule</span> checkIntArgs<span class="token punctuation">(</span> <span class="token operator">%</span> N <span class="token punctuation">,</span> ARGS <span class="token punctuation">,</span> I<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> checkIntArgs<span class="token punctuation">(</span>ARGS<span class="token punctuation">,</span> I <span class="token operator">+</span><span class="token keyword">Int</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token keyword">requires</span> String2Int<span class="token punctuation">(</span>IeleName2String<span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span><span class="token keyword">Int</span> I
    <span class="token keyword">rule</span> checkIntArgs<span class="token punctuation">(</span><span class="token punctuation">.</span>LocalNames<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">.</span>
</code></pre>
<h2 id="blocks">Blocks</h2>
<pre class="language-k"><code>    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> BLOCK<span class="token punctuation">:</span>UnlabeledBlock BLOCKS <span class="token operator">=&gt;</span> BLOCKS <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeChecking</span><span class="token punctuation">&gt;</span></span> <span class="token boolean">true</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeChecking</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>currentInstructions</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span>K <span class="token operator">=&gt;</span> BLOCK <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>currentInstructions</span><span class="token punctuation">&gt;</span></span>
    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> BLOCK<span class="token punctuation">:</span><span class="token punctuation">:</span>LabeledBlock BLOCKS <span class="token operator">=&gt;</span> BLOCK <span class="token operator">~&gt;</span> BLOCKS <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeChecking</span><span class="token punctuation">&gt;</span></span> <span class="token boolean">true</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeChecking</span><span class="token punctuation">&gt;</span></span>
    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span>LabeledBlocks <span class="token operator">=&gt;</span> INSTRS <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeChecking</span><span class="token punctuation">&gt;</span></span> <span class="token boolean">true</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeChecking</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>currentInstructions</span><span class="token punctuation">&gt;</span></span> INSTRS <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>currentInstructions</span><span class="token punctuation">&gt;</span></span>

    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> NAME <span class="token punctuation">:</span> BLOCK<span class="token punctuation">:</span><span class="token punctuation">:</span>Instructions <span class="token operator">=&gt;</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeChecking</span><span class="token punctuation">&gt;</span></span> <span class="token boolean">true</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeChecking</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>labels</span><span class="token punctuation">&gt;</span></span> LABELS <span class="token operator">=&gt;</span> LABELS SetItem<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>labels</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>currentInstructions</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span>K <span class="token operator">=&gt;</span> BLOCK <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>currentInstructions</span><span class="token punctuation">&gt;</span></span>
      <span class="token keyword">requires</span> notBool NAME in LABELS

    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> INSTR<span class="token punctuation">:</span><span class="token punctuation">:</span>Instruction INSTRS<span class="token punctuation">:</span><span class="token punctuation">:</span>Instructions <span class="token operator">=&gt;</span> check <span class="token operator">~&gt;</span> INSTR <span class="token operator">~&gt;</span> INSTRS <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeChecking</span><span class="token punctuation">&gt;</span></span> <span class="token boolean">true</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeChecking</span><span class="token punctuation">&gt;</span></span>
    <span class="token keyword">rule</span> <span class="token punctuation">.</span>Instructions <span class="token operator">=&gt;</span> <span class="token punctuation">.</span>
</code></pre>
<h2 id="instructions">Instructions</h2>
<h3 id="regular-instructions">Regular Instructions</h3>
<p>Each of these instructions takes some number of immediates, globals, or registers, and returns zero or one registers. Checking them is as straightforward as checking for reserved names.</p>
<pre class="language-k"><code>    <span class="token keyword">syntax</span> KResult <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> Type
                     <span class="token operator">|</span> Types
    <span class="token keyword">syntax</span> KItem <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> <span class="token string">&quot;check&quot;</span>
 <span class="token comment">// ------------------------</span>

    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> OP1 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperand<span class="token punctuation">(</span>OP1<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> load OP1 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperand<span class="token punctuation">(</span>OP1<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> load OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">,</span> OP3 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">,</span> OP3<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> store OP1<span class="token punctuation">,</span> OP2 <span class="token operator">=&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> store OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">,</span> OP3<span class="token punctuation">,</span> OP4 <span class="token operator">=&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">,</span> OP3<span class="token punctuation">,</span> OP4<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> sload OP1 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperand<span class="token punctuation">(</span>OP1<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> sstore OP1<span class="token punctuation">,</span> OP2 <span class="token operator">=&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> iszero OP1 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperand<span class="token punctuation">(</span>OP1<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> not    OP1 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperand<span class="token punctuation">(</span>OP1<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> add OP1<span class="token punctuation">,</span> OP2 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> mul OP1<span class="token punctuation">,</span> OP2 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> sub OP1<span class="token punctuation">,</span> OP2 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> div OP1<span class="token punctuation">,</span> OP2 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> exp OP1<span class="token punctuation">,</span> OP2 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> mod OP1<span class="token punctuation">,</span> OP2 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> addmod OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">,</span> OP3 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">,</span> OP3<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> mulmod OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">,</span> OP3 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">,</span> OP3<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> expmod OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">,</span> OP3 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">,</span> OP3<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> byte  OP1<span class="token punctuation">,</span> OP2 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> sext  OP1<span class="token punctuation">,</span> OP2 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> twos  OP1<span class="token punctuation">,</span> OP2 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> bswap OP1<span class="token punctuation">,</span> OP2 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> log2 OP1 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> and   OP1<span class="token punctuation">,</span> OP2 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> or    OP1<span class="token punctuation">,</span> OP2 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> xor   OP1<span class="token punctuation">,</span> OP2 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> shift OP1<span class="token punctuation">,</span> OP2 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> cmp _ OP1<span class="token punctuation">,</span> OP2 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> LVAL <span class="token operator">=</span> sha3 OP1 <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperand<span class="token punctuation">(</span>OP1<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> log OP1                     <span class="token operator">=&gt;</span> checkOperand<span class="token punctuation">(</span>OP1<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> log OP1<span class="token punctuation">,</span> OP2                <span class="token operator">=&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> log OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">,</span> OP3           <span class="token operator">=&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">,</span> OP3<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> log OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">,</span> OP3<span class="token punctuation">,</span> OP4      <span class="token operator">=&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">,</span> OP3<span class="token punctuation">,</span> OP4<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> log OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">,</span> OP3<span class="token punctuation">,</span> OP4<span class="token punctuation">,</span> OP5 <span class="token operator">=&gt;</span> checkOperands<span class="token punctuation">(</span>OP1<span class="token punctuation">,</span> OP2<span class="token punctuation">,</span> OP3<span class="token punctuation">,</span> OP4<span class="token punctuation">,</span> OP5<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> revert OP1 <span class="token operator">=&gt;</span> checkOperand<span class="token punctuation">(</span>OP1<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> selfdestruct OP1 <span class="token operator">=&gt;</span> checkOperand<span class="token punctuation">(</span>OP1<span class="token punctuation">)</span>
</code></pre>
<h3 id="static-jumps">Static Jumps</h3>
<p>Checking these instructions requires checking that a label exists that matches the specified label.</p>
<pre class="language-k"><code>    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> check <span class="token operator">~&gt;</span> br NAME <span class="token operator">=&gt;</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>labels</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> SetItem<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>labels</span><span class="token punctuation">&gt;</span></span>

    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> check <span class="token operator">~&gt;</span> br OP1<span class="token punctuation">,</span> NAME <span class="token operator">=&gt;</span> checkOperand<span class="token punctuation">(</span>OP1<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>labels</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> SetItem<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>labels</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h3 id="function-calls-and-returns">Function Calls and Returns</h3>
<p>Checking these instructions requires checking the types of local function calls and checking the consistency of the return type.</p>
<pre class="language-k"><code>    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> check <span class="token operator">~&gt;</span> RETS <span class="token operator">=</span> call @ NAME <span class="token punctuation">(</span> ARGS <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> checkLVals<span class="token punctuation">(</span>RETS<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>ARGS<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>types</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> NAME <span class="token operator">|</span><span class="token operator">-</span>&gt; ARGTYPES <span class="token operator">-</span>&gt; RETTYPES<span class="token punctuation">:</span>Types <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>types</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>well-formedness-schedule</span><span class="token punctuation">&gt;</span></span> SCHED <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>well-formedness-schedule</span><span class="token punctuation">&gt;</span></span>
      <span class="token keyword">requires</span> ints<span class="token punctuation">(</span>#sizeRegs<span class="token punctuation">(</span>ARGS<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span>K ARGTYPES andBool ints<span class="token punctuation">(</span>#sizeLVals<span class="token punctuation">(</span>RETS<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span>K RETTYPES andBool checkInit<span class="token punctuation">(</span>NAME<span class="token punctuation">,</span> SCHED<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> check <span class="token operator">~&gt;</span> RETS <span class="token operator">=</span> call @ NAME <span class="token punctuation">(</span> ARGS <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> checkLVals<span class="token punctuation">(</span>RETS<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>ARGS<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>types</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> NAME <span class="token operator">|</span><span class="token operator">-</span>&gt; ARGTYPES <span class="token operator">-</span>&gt; <span class="token punctuation">(</span>unknown <span class="token operator">=&gt;</span> ints<span class="token punctuation">(</span>#sizeLVals<span class="token punctuation">(</span>RETS<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>types</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>well-formedness-schedule</span><span class="token punctuation">&gt;</span></span> SCHED <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>well-formedness-schedule</span><span class="token punctuation">&gt;</span></span>
      <span class="token keyword">requires</span> ints<span class="token punctuation">(</span>#sizeRegs<span class="token punctuation">(</span>ARGS<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span>K ARGTYPES andBool checkInit<span class="token punctuation">(</span>NAME<span class="token punctuation">,</span> SCHED<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> check <span class="token operator">~&gt;</span> RETS <span class="token operator">=</span> call <span class="token operator">%</span> NAME <span class="token punctuation">(</span> ARGS <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> checkLVals<span class="token punctuation">(</span>RETS<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>ARGS<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>

    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> STATUS<span class="token punctuation">,</span> RETS <span class="token operator">=</span> call NAME at OP1 <span class="token punctuation">(</span> ARGS <span class="token punctuation">)</span> send OP2 <span class="token punctuation">,</span> gaslimit OP3 <span class="token operator">=&gt;</span> checkLVals<span class="token punctuation">(</span>STATUS<span class="token punctuation">,</span> RETS<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1 <span class="token punctuation">,</span> OP2 <span class="token punctuation">,</span> OP3 <span class="token punctuation">,</span> ARGS<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> STATUS<span class="token punctuation">,</span> RETS <span class="token operator">=</span> staticcall NAME at OP1 <span class="token punctuation">(</span> ARGS <span class="token punctuation">)</span> gaslimit OP2 <span class="token operator">=&gt;</span> checkLVals<span class="token punctuation">(</span>STATUS<span class="token punctuation">,</span> RETS<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1 <span class="token punctuation">,</span> OP2 <span class="token punctuation">,</span> ARGS<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> RET <span class="token operator">=</span> calladdress NAME at OP <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>RET<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperand<span class="token punctuation">(</span>OP<span class="token punctuation">)</span>

    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> check <span class="token operator">~&gt;</span> ret OPS <span class="token operator">=&gt;</span> checkOperands<span class="token punctuation">(</span>OPS<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>functionName</span><span class="token punctuation">&gt;</span></span> NAME <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>functionName</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>types</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> NAME <span class="token operator">|</span><span class="token operator">-</span>&gt; _ <span class="token operator">-</span>&gt; RETTYPES<span class="token punctuation">:</span>Types <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>types</span><span class="token punctuation">&gt;</span></span>
      <span class="token keyword">requires</span> ints<span class="token punctuation">(</span>#sizeRegs<span class="token punctuation">(</span>OPS<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span>K RETTYPES

    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> check <span class="token operator">~&gt;</span> ret OPS <span class="token operator">=&gt;</span> checkOperands<span class="token punctuation">(</span>OPS<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>functionName</span><span class="token punctuation">&gt;</span></span> NAME <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>functionName</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>types</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> NAME <span class="token operator">|</span><span class="token operator">-</span>&gt; _ <span class="token operator">-</span>&gt; <span class="token punctuation">(</span>unknown <span class="token operator">=&gt;</span> ints<span class="token punctuation">(</span>#sizeRegs<span class="token punctuation">(</span>OPS<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>types</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h3 id="contract-creation">Contract Creation</h3>
<p>Checking these instructions also requires checking that the contract they reference has been declared.</p>
<pre class="language-k"><code>    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> check <span class="token operator">~&gt;</span> STATUS <span class="token punctuation">,</span> RET <span class="token operator">=</span> create NAME <span class="token punctuation">(</span> ARGS <span class="token punctuation">)</span> send OP1 <span class="token operator">=&gt;</span> checkLVals<span class="token punctuation">(</span>STATUS<span class="token punctuation">,</span> RET<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1 <span class="token punctuation">,</span> ARGS<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>declaredContracts</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> SetItem<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>declaredContracts</span><span class="token punctuation">&gt;</span></span>

    <span class="token keyword">rule</span> check <span class="token operator">~&gt;</span> STATUS <span class="token punctuation">,</span> RET <span class="token operator">=</span> copycreate OP1 <span class="token punctuation">(</span> ARGS <span class="token punctuation">)</span> send OP2 <span class="token operator">=&gt;</span> checkLVals<span class="token punctuation">(</span>STATUS<span class="token punctuation">,</span> RET<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OP1 <span class="token punctuation">,</span> OP2 <span class="token punctuation">,</span> ARGS<span class="token punctuation">)</span>
</code></pre>
<h2 id="types-of-intrinsic-functions">Types of intrinsic functions</h2>
<p>Below are defined the types of the reserved functions that begin with &quot;iele.&quot;.</p>
<pre class="language-k"><code>    <span class="token keyword">syntax</span> Map <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> <span class="token string">&quot;intrinsicTypes&quot;</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
 <span class="token comment">// ------------------------------------------</span>
    <span class="token keyword">rule</span> intrinsicTypes <span class="token operator">=&gt;</span>
    <span class="token punctuation">(</span>iele<span class="token punctuation">.</span>invalid <span class="token operator">|</span><span class="token operator">-</span>&gt; <span class="token punctuation">.</span>Types <span class="token operator">-</span>&gt; <span class="token punctuation">.</span>Types
    <span class="token punctuation">(</span>iele<span class="token punctuation">.</span>gas <span class="token operator">|</span><span class="token operator">-</span>&gt; <span class="token punctuation">.</span>Types <span class="token operator">-</span>&gt; int<span class="token punctuation">,</span> <span class="token punctuation">.</span>Types
    <span class="token punctuation">(</span>iele<span class="token punctuation">.</span>gasprice <span class="token operator">|</span><span class="token operator">-</span>&gt; <span class="token punctuation">.</span>Types <span class="token operator">-</span>&gt; int<span class="token punctuation">,</span> <span class="token punctuation">.</span>Types
    <span class="token punctuation">(</span>iele<span class="token punctuation">.</span>gaslimit <span class="token operator">|</span><span class="token operator">-</span>&gt; <span class="token punctuation">.</span>Types <span class="token operator">-</span>&gt; int<span class="token punctuation">,</span> <span class="token punctuation">.</span>Types
    <span class="token punctuation">(</span>iele<span class="token punctuation">.</span>beneficiary <span class="token operator">|</span><span class="token operator">-</span>&gt; <span class="token punctuation">.</span>Types <span class="token operator">-</span>&gt; int<span class="token punctuation">,</span> <span class="token punctuation">.</span>Types
    <span class="token punctuation">(</span>iele<span class="token punctuation">.</span>timestamp <span class="token operator">|</span><span class="token operator">-</span>&gt; <span class="token punctuation">.</span>Types <span class="token operator">-</span>&gt; int<span class="token punctuation">,</span> <span class="token punctuation">.</span>Types
    <span class="token punctuation">(</span>iele<span class="token punctuation">.</span>number <span class="token operator">|</span><span class="token operator">-</span>&gt; <span class="token punctuation">.</span>Types <span class="token operator">-</span>&gt; int<span class="token punctuation">,</span> <span class="token punctuation">.</span>Types
    <span class="token punctuation">(</span>iele<span class="token punctuation">.</span>difficulty <span class="token operator">|</span><span class="token operator">-</span>&gt; <span class="token punctuation">.</span>Types <span class="token operator">-</span>&gt; int<span class="token punctuation">,</span> <span class="token punctuation">.</span>Types
    <span class="token punctuation">(</span>iele<span class="token punctuation">.</span>address <span class="token operator">|</span><span class="token operator">-</span>&gt; <span class="token punctuation">.</span>Types <span class="token operator">-</span>&gt; int<span class="token punctuation">,</span> <span class="token punctuation">.</span>Types
    <span class="token punctuation">(</span>iele<span class="token punctuation">.</span>origin <span class="token operator">|</span><span class="token operator">-</span>&gt; <span class="token punctuation">.</span>Types <span class="token operator">-</span>&gt; int<span class="token punctuation">,</span> <span class="token punctuation">.</span>Types
    <span class="token punctuation">(</span>iele<span class="token punctuation">.</span>caller <span class="token operator">|</span><span class="token operator">-</span>&gt; <span class="token punctuation">.</span>Types <span class="token operator">-</span>&gt; int<span class="token punctuation">,</span> <span class="token punctuation">.</span>Types
    <span class="token punctuation">(</span>iele<span class="token punctuation">.</span>callvalue <span class="token operator">|</span><span class="token operator">-</span>&gt; <span class="token punctuation">.</span>Types <span class="token operator">-</span>&gt; int<span class="token punctuation">,</span> <span class="token punctuation">.</span>Types
    <span class="token punctuation">(</span>iele<span class="token punctuation">.</span>msize <span class="token operator">|</span><span class="token operator">-</span>&gt; <span class="token punctuation">.</span>Types <span class="token operator">-</span>&gt; int<span class="token punctuation">,</span> <span class="token punctuation">.</span>Types
    <span class="token punctuation">(</span>iele<span class="token punctuation">.</span>codesize <span class="token operator">|</span><span class="token operator">-</span>&gt; <span class="token punctuation">.</span>Types <span class="token operator">-</span>&gt; int<span class="token punctuation">,</span> <span class="token punctuation">.</span>Types
    <span class="token punctuation">(</span>iele<span class="token punctuation">.</span>blockhash <span class="token operator">|</span><span class="token operator">-</span>&gt; int <span class="token operator">-</span>&gt; int<span class="token punctuation">,</span> <span class="token punctuation">.</span>Types
    <span class="token punctuation">(</span>iele<span class="token punctuation">.</span>balance <span class="token operator">|</span><span class="token operator">-</span>&gt; int <span class="token operator">-</span>&gt; int<span class="token punctuation">,</span> <span class="token punctuation">.</span>Types
    <span class="token punctuation">(</span>iele<span class="token punctuation">.</span>extcodesize <span class="token operator">|</span><span class="token operator">-</span>&gt; int <span class="token operator">-</span>&gt; int<span class="token punctuation">,</span> <span class="token punctuation">.</span>Types
    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
</code></pre>
<h2 id="reserved-names">Reserved Names</h2>
<p>All identifiers beginning with &quot;iele.&quot; are reserved by the language and cannot be written to.</p>
<pre class="language-k"><code>    <span class="token keyword">syntax</span> KItem <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> checkName<span class="token punctuation">(</span>IeleName<span class="token punctuation">)</span>
 <span class="token comment">// ------------------------------------</span>
    <span class="token keyword">rule</span> checkName<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">.</span>
      <span class="token keyword">requires</span> lengthString<span class="token punctuation">(</span>IeleName2String<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span><span class="token punctuation">)</span> &lt;<span class="token keyword">Int</span> <span class="token number">5</span> orBool substrString<span class="token punctuation">(</span>IeleName2String<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">/</span><span class="token operator">=</span><span class="token keyword">String</span> <span class="token string">&quot;iele.&quot;</span>

    <span class="token keyword">syntax</span> <span class="token keyword">Bool</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> checkInit<span class="token punctuation">(</span>IeleName<span class="token punctuation">,</span> Schedule<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
 <span class="token comment">// --------------------------------------------------------</span>
    <span class="token keyword">rule</span> checkInit<span class="token punctuation">(</span>init<span class="token punctuation">,</span> SCHED<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> SCHED <span class="token operator">=</span><span class="token operator">/</span><span class="token operator">=</span>K ALBE
    <span class="token keyword">rule</span> checkInit<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span> <span class="token punctuation">[</span>owise<span class="token punctuation">]</span>
</code></pre>
<p>In order to correctly check names, we must convert escaped IELE names to their correct token representation.</p>
<pre class="language-k"><code>    <span class="token keyword">syntax</span> <span class="token keyword">String</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> unescape<span class="token punctuation">(</span><span class="token keyword">String</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">]</span>
                    <span class="token operator">|</span> unescape<span class="token punctuation">(</span><span class="token keyword">String</span><span class="token punctuation">,</span> <span class="token keyword">Int</span><span class="token punctuation">,</span> StringBuffer<span class="token punctuation">)</span> <span class="token punctuation">[</span>function<span class="token punctuation">,</span> <span class="token class-name">klabel</span><span class="token punctuation">(</span>unescapeAux<span class="token punctuation">)</span><span class="token punctuation">]</span>
 <span class="token comment">// -------------------------------------------------------------------------------------</span>
    <span class="token keyword">rule</span> unescape<span class="token punctuation">(</span>S<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> unescape<span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>StringBuffer<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> unescape<span class="token punctuation">(</span>S<span class="token punctuation">,</span> IDX<span class="token punctuation">,</span> SB<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> unescape<span class="token punctuation">(</span>S<span class="token punctuation">,</span> IDX <span class="token operator">+</span><span class="token keyword">Int</span> <span class="token number">1</span><span class="token punctuation">,</span> SB <span class="token operator">+</span><span class="token keyword">String</span> substrString<span class="token punctuation">(</span>S<span class="token punctuation">,</span> IDX<span class="token punctuation">,</span> IDX <span class="token operator">+</span><span class="token keyword">Int</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">requires</span> IDX &lt;<span class="token keyword">Int</span> lengthString<span class="token punctuation">(</span>S<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token keyword">Int</span> <span class="token number">1</span> andBool substrString<span class="token punctuation">(</span>S<span class="token punctuation">,</span> IDX<span class="token punctuation">,</span> IDX <span class="token operator">+</span><span class="token keyword">Int</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">/</span><span class="token operator">=</span>K <span class="token string">&quot;\\&quot;</span>
    <span class="token keyword">rule</span> unescape<span class="token punctuation">(</span>S<span class="token punctuation">,</span> IDX<span class="token punctuation">,</span> SB<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> unescape<span class="token punctuation">(</span>S<span class="token punctuation">,</span> IDX <span class="token operator">+</span><span class="token keyword">Int</span> <span class="token number">3</span><span class="token punctuation">,</span> SB <span class="token operator">+</span><span class="token keyword">String</span> chrChar<span class="token punctuation">(</span>String2Base<span class="token punctuation">(</span>substrString<span class="token punctuation">(</span>S<span class="token punctuation">,</span> IDX <span class="token operator">+</span><span class="token keyword">Int</span> <span class="token number">1</span><span class="token punctuation">,</span> IDX <span class="token operator">+</span><span class="token keyword">Int</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">requires</span> IDX &lt;<span class="token keyword">Int</span> lengthString<span class="token punctuation">(</span>S<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token keyword">Int</span> <span class="token number">1</span> andBool substrString<span class="token punctuation">(</span>S<span class="token punctuation">,</span> IDX<span class="token punctuation">,</span> IDX <span class="token operator">+</span><span class="token keyword">Int</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span>K <span class="token string">&quot;\\&quot;</span>
    <span class="token keyword">rule</span> unescape<span class="token punctuation">(</span>S<span class="token punctuation">,</span> IDX<span class="token punctuation">,</span> SB<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> StringBuffer2String<span class="token punctuation">(</span>SB<span class="token punctuation">)</span>
      <span class="token keyword">requires</span> IDX <span class="token operator">==</span><span class="token keyword">Int</span> lengthString<span class="token punctuation">(</span>S<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token keyword">Int</span> <span class="token number">1</span>
    <span class="token keyword">rule</span> `StringIeleName`<span class="token punctuation">(</span>NAME<span class="token punctuation">:</span>StringIeleName<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> String2IeleName<span class="token punctuation">(</span>unescape<span class="token punctuation">(</span>StringIeleName2String<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<h2 id="checking-operands">Checking Operands</h2>
<pre class="language-k"><code>    <span class="token keyword">syntax</span> KItem <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> checkOperand<span class="token punctuation">(</span>Operand<span class="token punctuation">)</span>
                   <span class="token operator">|</span> checkOperands<span class="token punctuation">(</span>Operands<span class="token punctuation">)</span>
 <span class="token comment">// ----------------------------------------</span>
    <span class="token keyword">rule</span> checkOperands<span class="token punctuation">(</span>OP <span class="token punctuation">,</span> OPS<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> checkOperand<span class="token punctuation">(</span>OP<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkOperands<span class="token punctuation">(</span>OPS<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> checkOperands<span class="token punctuation">(</span><span class="token punctuation">.</span>Operands<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">.</span>

    <span class="token keyword">rule</span> checkOperand<span class="token punctuation">(</span><span class="token operator">%</span> NAME<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">.</span>
    <span class="token keyword">rule</span> checkOperand<span class="token punctuation">(</span>_<span class="token punctuation">:</span>IntConstant<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">.</span>
    <span class="token keyword">rule</span> checkOperand<span class="token punctuation">(</span>@ NAME<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">.</span>
</code></pre>
<h2 id="checking-lvalues">Checking LValues</h2>
<pre class="language-k"><code>    <span class="token keyword">syntax</span> KItem <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> checkLVal<span class="token punctuation">(</span>LValue<span class="token punctuation">)</span>
                   <span class="token operator">|</span> checkLVals<span class="token punctuation">(</span>LValues<span class="token punctuation">)</span>
 <span class="token comment">// --------------------------------------</span>
    <span class="token keyword">rule</span> checkLVals<span class="token punctuation">(</span>LVAL <span class="token punctuation">,</span> LVALS<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> checkLVal<span class="token punctuation">(</span>LVAL<span class="token punctuation">)</span> <span class="token operator">~&gt;</span> checkLVals<span class="token punctuation">(</span>LVALS<span class="token punctuation">)</span>
    <span class="token keyword">rule</span> checkLVals<span class="token punctuation">(</span><span class="token punctuation">.</span>LValues<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">.</span>

    <span class="token keyword">rule</span> checkLVal<span class="token punctuation">(</span><span class="token operator">%</span> NAME<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> checkName<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span>
<span class="token keyword">endmodule</span>

<span class="token keyword">module</span> IELE<span class="token operator">-</span>WELL<span class="token operator">-</span>FORMEDNESS<span class="token operator">-</span>STANDALONE
    <span class="token keyword">imports</span> IELE<span class="token operator">-</span>WELL<span class="token operator">-</span>FORMEDNESS

    <span class="token keyword">configuration</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> $PGM<span class="token punctuation">:</span>Contract <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>well-formedness</span><span class="token punctuation">/&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exit-code</span> <span class="token attr-name">exit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token number">1</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exit-code</span><span class="token punctuation">&gt;</span></span>

    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeChecking</span><span class="token punctuation">&gt;</span></span> <span class="token boolean">false</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeChecking</span><span class="token punctuation">&gt;</span></span>
    <span class="token keyword">rule</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exit-code</span><span class="token punctuation">&gt;</span></span> <span class="token number">1</span> <span class="token operator">=&gt;</span> <span class="token number">0</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exit-code</span><span class="token punctuation">&gt;</span></span>

<span class="token keyword">endmodule</span>
</code></pre>
</body></html></div>
        </main>
      </div>
    </div>
<footer class="app-footer text-md-left text-center">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-2 mb-md-0 mb-4">
        <span class="pr-md-5 pr-0 py-3">
          <a href="https://runtimeverification.com" target="_blank">
            <picture>
              <source
                srcset="../assets/img/rv-logo-dark.png"
                media="(prefers-color-scheme: dark)"
              />
              <img
                class="pr-3 footer-logo"
                src="../assets/img/rv-logo.png"
                alt="Runtime Verification Inc logo"
              />
            </picture>
          </a>
        </span>
      </div>
      <div class="col-md-6 mb-md-0 mb-4"></div>
      <div class="col-md-4 text-md-right">
        <p class="copyright">
          &copy; 2020 Runtime Verification Inc. All right reserved.
        </p>
      </div>
    </div>
  </div>
</footer>

<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=UA-163311512-1"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "UA-163311512-1");
</script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Typist/1.2/typist.min.js"></script>
    <script src="../assets/js/index.js"></script>
  </body>
</html>
