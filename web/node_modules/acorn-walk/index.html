<!DOCTYPE html>
<html lang="en">
  <head>
<meta charset="utf-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
/>
<meta
  name="description"
  content="Design and implement your programming language and software analysis tools with mathematical rigor."
/>
<meta name="keywords" content="runtime, verification, rv, k" />
<meta name="author" content="IELE Semantics | Runtime Verification Inc" />
<meta name="robots" content="index, follow" />

<!--favicon icon-->
<link rel="icon" type="image/png" href="../../../assets/img/favicon.ico" />

<title>IELE Semantics | Runtime Verification Inc</title>

<!-- <base href="/k/" /> -->

<!--web fonts-->
<link
  href="https://fonts.googleapis.com/css?family=Nunito:300,400,600,700,800"
  rel="stylesheet"
/>
<link
  href="https://fonts.googleapis.com/css?family=Lora:400i"
  rel="stylesheet"
/>

<link
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"
  rel="stylesheet"
/>

<link href="../../../assets/css/index.css" rel="stylesheet" />

<!--[if (gt IE 9) |!(IE)]><!-->
<!--<link rel="stylesheet" href="/assets/vendor/custom-nav/css/effects/fade-menu.css"/>-->
<!-- <link rel="stylesheet" href="../../../assets/k/vl-nav/css/effects/slide-menu.css" /> -->
<!--<![endif]-->

  </head>

  <body>
<header
  class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar"
>
  <a class="logo-link" href="../../../index.html">
    <img
      class="logo-dark"
      srcset="../../../assets/img/iele-logo.png"
      alt="K"
      style="height: 48px"
    />
    Semantic Framework
  </a>
  <ul class="navbar-nav ml-md-auto">
    <li class="nav-item">
      <a
        class="nav-link pl-2 pr-1 mx-1 py-3 my-n2"
        href="https://github.com/runtimeverification/iele-semantics"
        target="_blank"
        rel="noopener"
        aria-label="GitHub"
      >
        <i class="fab fa-github"></i>
      </a>
    </li>
  </ul>
  <a
    class="btn btn-rv-blue d-none d-lg-inline-block mb-3 mb-md-0 ml-md-3"
    href="../../../downloads"
    >Download</a
  >
</header>


    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 bd-sidebar mb-3">
  <form
    role="search"
    class="bd-search d-flex align-items-center justify-content-between"
  >
    <input
      type="search"
      class="form-control"
      placeholder="Search..."
      aria-label="Search for..."
      autocomplete="false"
      id="search-box"
    />
    <button
      class="btn bd-search-docs-toggle d-md-none p-0 ml-3 collapsed"
      type="button"
      aria-label="Toggle docs navigation"
      style="font-size: 1.4rem"
    >
      <i class="fas fa-bars"></i>
    </button>
  </form>
  <nav class="collapse bd-links" aria-label="Main navigation">
    <div class="bd-toc-item">
      <a class="bd-toc-link" href="../../../">Homepage</a>
      <a class="bd-toc-link" href="../../../INSTALL">Install</a>
      <a class="bd-toc-link" href="../../../Design">Design</a>
    </div>
  </nav>
</div>

        <main
          class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content"
          role="main"
        >
          <div class="markdown-preview"><html><head></head><body><h1>Acorn AST walker</h1>
<p>An abstract syntax tree walker for the
<a href="https://github.com/estree/estree" target="_blank" rel="noopener">ESTree</a> format.</p>
<h2>Community</h2>
<p>Acorn is open source software released under an
<a href="https://github.com/acornjs/acorn/blob/master/acorn-walk/LICENSE" target="_blank" rel="noopener">MIT license</a>.</p>
<p>You are welcome to
<a href="https://github.com/acornjs/acorn/issues" target="_blank" rel="noopener">report bugs</a> or create pull
requests on <a href="https://github.com/acornjs/acorn" target="_blank" rel="noopener">github</a>. For questions
and discussion, please use the
<a href="https://discuss.ternjs.net" target="_blank" rel="noopener">Tern discussion forum</a>.</p>
<h2>Installation</h2>
<p>The easiest way to install acorn is from <a href="https://www.npmjs.com/" target="_blank" rel="noopener"><code>npm</code></a>:</p>
<pre class="hljs"><code>npm install acorn-walk
</code></pre>
<p>Alternately, you can download the source and build acorn yourself:</p>
<pre class="hljs"><code>git <span class="hljs-built_in">clone</span> https://github.com/acornjs/acorn.git
<span class="hljs-built_in">cd</span> acorn
npm install
</code></pre>
<h2>Interface</h2>
<p>An algorithm for recursing through a syntax tree is stored as an
object, with a property for each tree node type holding a function
that will recurse through such a node. There are several ways to run
such a walker.</p>
<p><strong>simple</strong><code>(node, visitors, base, state)</code> does a &apos;simple&apos; walk over a
tree. <code>node</code> should be the AST node to walk, and <code>visitors</code> an object
with properties whose names correspond to node types in the <a href="https://github.com/estree/estree" target="_blank" rel="noopener">ESTree
spec</a>. The properties should contain
functions that will be called with the node object and, if applicable
the state at that point. The last two arguments are optional. <code>base</code>
is a walker algorithm, and <code>state</code> is a start state. The default
walker will simply visit all statements and expressions and not
produce a meaningful state. (An example of a use of state is to track
scope at each point in the tree.)</p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> acorn = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;acorn&quot;</span>)
<span class="hljs-keyword">const</span> walk = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;acorn-walk&quot;</span>)

walk.simple(acorn.parse(<span class="hljs-string">&quot;let x = 10&quot;</span>), {
  Literal(node) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Found a literal: <span class="hljs-subst">${node.value}</span>`</span>)
  }
})
</code></pre>
<p><strong>ancestor</strong><code>(node, visitors, base, state)</code> does a &apos;simple&apos; walk over
a tree, building up an array of ancestor nodes (including the current node)
and passing the array to the callbacks as a third parameter.</p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> acorn = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;acorn&quot;</span>)
<span class="hljs-keyword">const</span> walk = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;acorn-walk&quot;</span>)

walk.ancestor(acorn.parse(<span class="hljs-string">&quot;foo(&apos;hi&apos;)&quot;</span>), {
  Literal(_, ancestors) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;This literal&apos;s ancestors are:&quot;</span>, ancestors.map(<span class="hljs-function"><span class="hljs-params">n</span> =&gt;</span> n.type))
  }
})
</code></pre>
<p><strong>recursive</strong><code>(node, state, functions, base)</code> does a &apos;recursive&apos;
walk, where the walker functions are responsible for continuing the
walk on the child nodes of their target node. <code>state</code> is the start
state, and <code>functions</code> should contain an object that maps node types
to walker functions. Such functions are called with <code>(node, state, c)</code>
arguments, and can cause the walk to continue on a sub-node by calling
the <code>c</code> argument on it with <code>(node, state)</code> arguments. The optional
<code>base</code> argument provides the fallback walker functions for node types
that aren&apos;t handled in the <code>functions</code> object. If not given, the
default walkers will be used.</p>
<p><strong>make</strong><code>(functions, base)</code> builds a new walker object by using the
walker functions in <code>functions</code> and filling in the missing ones by
taking defaults from <code>base</code>.</p>
<p><strong>full</strong><code>(node, callback, base, state)</code> does a &apos;full&apos; walk over a
tree, calling the callback with the arguments (node, state, type) for
each node</p>
<p><strong>fullAncestor</strong><code>(node, callback, base, state)</code> does a &apos;full&apos; walk
over a tree, building up an array of ancestor nodes (including the
current node) and passing the array to the callbacks as a third
parameter.</p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> acorn = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;acorn&quot;</span>)
<span class="hljs-keyword">const</span> walk = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;acorn-walk&quot;</span>)

walk.full(acorn.parse(<span class="hljs-string">&quot;1 + 1&quot;</span>), <span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`There&apos;s a <span class="hljs-subst">${node.type}</span> node at <span class="hljs-subst">${node.ch}</span>`</span>)
})
</code></pre>
<p><strong>findNodeAt</strong><code>(node, start, end, test, base, state)</code> tries to locate
a node in a tree at the given start and/or end offsets, which
satisfies the predicate <code>test</code>. <code>start</code> and <code>end</code> can be either <code>null</code>
(as wildcard) or a number. <code>test</code> may be a string (indicating a node
type) or a function that takes <code>(nodeType, node)</code> arguments and
returns a boolean indicating whether this node is interesting. <code>base</code>
and <code>state</code> are optional, and can be used to specify a custom walker.
Nodes are tested from inner to outer, so if two nodes match the
boundaries, the inner one will be preferred.</p>
<p><strong>findNodeAround</strong><code>(node, pos, test, base, state)</code> is a lot like
<code>findNodeAt</code>, but will match any node that exists &apos;around&apos; (spanning)
the given position.</p>
<p><strong>findNodeAfter</strong><code>(node, pos, test, base, state)</code> is similar to
<code>findNodeAround</code>, but will match all nodes <em>after</em> the given position
(testing outer nodes before inner nodes).</p>
</body></html></div>
        </main>
      </div>
    </div>
<footer class="app-footer text-md-left text-center">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-2 mb-md-0 mb-4">
        <span class="pr-md-5 pr-0 py-3">
          <a href="https://runtimeverification.com" target="_blank">
            <picture>
              <source
                srcset="../../../assets/img/rv-logo-dark.png"
                media="(prefers-color-scheme: dark)"
              />
              <img
                class="pr-3 footer-logo"
                src="../../../assets/img/rv-logo.png"
                alt="Runtime Verification Inc logo"
              />
            </picture>
          </a>
        </span>
      </div>
      <div class="col-md-6 mb-md-0 mb-4"></div>
      <div class="col-md-4 text-md-right">
        <p class="copyright">
          &copy; 2020 Runtime Verification Inc. All right reserved.
        </p>
      </div>
    </div>
  </div>
</footer>

<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=UA-163311512-1"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "UA-163311512-1");
</script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Typist/1.2/typist.min.js"></script>
    <script src="../../../assets/js/index.js"></script>
  </body>
</html>
