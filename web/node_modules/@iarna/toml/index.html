<!DOCTYPE html>
<html lang="en">
  <head>
<meta charset="utf-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
/>
<meta
  name="description"
  content="Design and implement your programming language and software analysis tools with mathematical rigor."
/>
<meta name="keywords" content="runtime, verification, rv, k" />
<meta name="author" content="IELE Semantics | Runtime Verification Inc" />
<meta name="robots" content="index, follow" />

<!--favicon icon-->
<link rel="icon" type="image/png" href="../../../../assets/img/favicon.ico" />

<title>IELE Semantics | Runtime Verification Inc</title>

<!-- <base href="/k/" /> -->

<!--web fonts-->
<link
  href="https://fonts.googleapis.com/css?family=Nunito:300,400,600,700,800"
  rel="stylesheet"
/>
<link
  href="https://fonts.googleapis.com/css?family=Lora:400i"
  rel="stylesheet"
/>

<link
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"
  rel="stylesheet"
/>

<link href="../../../../assets/css/index.css" rel="stylesheet" />

<!--[if (gt IE 9) |!(IE)]><!-->
<!--<link rel="stylesheet" href="/assets/vendor/custom-nav/css/effects/fade-menu.css"/>-->
<!-- <link rel="stylesheet" href="../../../../assets/k/vl-nav/css/effects/slide-menu.css" /> -->
<!--<![endif]-->

  </head>

  <body>
<header
  class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar"
>
  <a class="logo-link" href="../../../../index.html">
    <img
      class="logo-dark"
      srcset="../../../../assets/img/iele-logo.png"
      alt="K"
      style="height: 48px"
    />
    Semantic Framework
  </a>
  <ul class="navbar-nav ml-md-auto">
    <li class="nav-item">
      <a
        class="nav-link pl-2 pr-1 mx-1 py-3 my-n2"
        href="https://github.com/runtimeverification/iele-semantics"
        target="_blank"
        rel="noopener"
        aria-label="GitHub"
      >
        <i class="fab fa-github"></i>
      </a>
    </li>
  </ul>
  <a
    class="btn btn-rv-blue d-none d-lg-inline-block mb-3 mb-md-0 ml-md-3"
    href="../../../../downloads"
    >Download</a
  >
</header>


    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 bd-sidebar mb-3">
  <form
    role="search"
    class="bd-search d-flex align-items-center justify-content-between"
  >
    <input
      type="search"
      class="form-control"
      placeholder="Search..."
      aria-label="Search for..."
      autocomplete="false"
      id="search-box"
    />
    <button
      class="btn bd-search-docs-toggle d-md-none p-0 ml-3 collapsed"
      type="button"
      aria-label="Toggle docs navigation"
      style="font-size: 1.4rem"
    >
      <i class="fas fa-bars"></i>
    </button>
  </form>
  <nav class="collapse bd-links" aria-label="Main navigation">
    <div class="bd-toc-item">
      <a class="bd-toc-link" href="../../../../">Homepage</a>
      <a class="bd-toc-link" href="../../../../INSTALL">Install</a>
      <a class="bd-toc-link" href="../../../../Design">Design</a>
    </div>
  </nav>
</div>

        <main
          class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content"
          role="main"
        >
          <div class="markdown-preview"><html><head></head><body><h1>@iarna/toml</h1>
<p>Better TOML parsing and stringifying all in that familiar JSON interface.</p>
<p><a href="https://coveralls.io/github/iarna/iarna-toml" target="_blank" rel="noopener"><img src="https://coveralls.io/repos/github/iarna/iarna-toml/badge.svg" alt="Coverage Status"></a></p>
<h1>** TOML 0.5.0 **</h1>
<h3>TOML Spec Support</h3>
<p>The most recent version as of 2018-07-26: <a href="https://github.com/mojombo/toml/blob/master/versions/en/toml-v0.5.0.md" target="_blank" rel="noopener">v0.5.0</a></p>
<h3>Example</h3>
<pre class="hljs"><code><span class="hljs-keyword">const</span> TOML = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;@iarna/toml&apos;</span>)
<span class="hljs-keyword">const</span> obj = TOML.parse(<span class="hljs-string">`[abc]
foo = 123
bar = [1,2,3]`</span>)
<span class="hljs-comment">/* obj =
{abc: {foo: 123, bar: [1,2,3]}}
*/</span>
<span class="hljs-keyword">const</span> str = TOML.stringify(obj)
<span class="hljs-comment">/* str =
[abc]
foo = 123
bar = [ 1, 2, 3 ]
*/</span>
</code></pre>
<p>Visit the project github <a href="https://github.com/iarna/iarna-toml/tree/latest/examples" target="_blank" rel="noopener">for more examples</a>!</p>
<h2>Why @iarna/toml</h2>
<ul>
<li>See <a href="https://shared.by.re-becca.org/misc/TOML-SPEC-SUPPORT.html" target="_blank" rel="noopener">TOML-SPEC-SUPPORT</a>
for a comparison of which TOML features are supported by the various
Node.js TOML parsers.</li>
<li>BigInt support on Node 10!</li>
<li>100% test coverage.</li>
<li>Fast parsing. It&apos;s as much as 100 times
faster than <code>toml</code> and 3 times faster than <code>toml-j0.4</code>.  However a recent
newcomer <a href="https://www.npmjs.com/package/@ltd/j-toml" target="_blank" rel="noopener"><code>@ltd/j-toml</code></a> has
appeared with 0.5 support and astoundingly fast parsing speeds for large
text blocks. All I can say is you&apos;ll have to test your specific work loads
if you want to know which of @iarna/toml and @ltd/j-toml is faster for
you, as we currently excell in different areas.</li>
<li>Careful adherence to spec. Tests go beyond simple coverage.</li>
<li>Smallest parser bundle (if you use <code>@iarna/toml/parse-string</code>).</li>
<li>No deps.</li>
<li>Detailed and easy to read error messages&#x203C;</li>
</ul>
<pre class="hljs"><code><span class="hljs-meta">&gt;</span><span class="bash"> TOML.parse(src)</span>
Error: Unexpected character, expecting string, number, datetime, boolean, inline array or inline table at row 6, col 5, pos 87:
5: &quot;abc\&quot;&quot; = { abc=123,def=&quot;abc&quot; }
<span class="hljs-meta">6&gt;</span><span class="bash"> foo=sdkfj</span>
       ^
7:
</code></pre>
<h2>TOML.parse(str) &#x2192; Object <a href="https://github.com/iarna/iarna-toml/blob/latest/examples/parse.js" target="_blank" rel="noopener">(example)</a></h2>
<p>Also available with: <code>require(&apos;@iarna/toml/parse-string&apos;)</code></p>
<p>Synchronously parse a TOML string and return an object.</p>
<h2>TOML.stringify(obj) &#x2192; String <a href="https://github.com/iarna/iarna-toml/blob/latest/examples/stringify.js" target="_blank" rel="noopener">(example)</a></h2>
<p>Also available with: <code>require(&apos;@iarna/toml/stringify)</code></p>
<p>Serialize an object as TOML.</p>
<h2>[your-object].toJSON</h2>
<p>If an object <code>TOML.stringify</code> is serializing has a <code>toJSON</code> method then it
will call it to transform the object before serializing it.  This matches
the behavior of <code>JSON.stringify</code>.</p>
<p>The one exception to this is that <code>toJSON</code> is not called for <code>Date</code> objects
because <code>JSON</code> represents dates as strings and TOML can represent them natively.</p>
<p><a href="https://www.npmjs.com/package/moment" target="_blank" rel="noopener"><code>moment</code></a> objects are treated the
same as native <code>Date</code> objects, in this respect.</p>
<h2>TOML.stringify.value(obj) -&gt; String</h2>
<p>Also available with: <code>require(&apos;@iarna/toml/stringify&apos;).value</code></p>
<p>Serialize a value as TOML would.  This is a fragment and not a complete
valid TOML document.</p>
<h2>Promises and Streaming</h2>
<p>The parser provides alternative async and streaming interfaces, for times
that you&apos;re working with really absurdly big TOML files and don&apos;t want to
tie-up the event loop while it parses.</p>
<h3>TOML.parse.async(str[, opts]) &#x2192; Promise(Object) <a href="https://github.com/iarna/iarna-toml/blob/latest/examples/parse-async.js" target="_blank" rel="noopener">(example)</a></h3>
<p>Also available with: <code>require(&apos;@iarna/toml/parse-async&apos;)</code></p>
<p><code>opts.blocksize</code> is the amount text to parser per pass through the event loop. Defaults to 40kb.</p>
<p>Asynchronously parse a TOML string and return a promise of the resulting object.</p>
<h3>TOML.parse.stream(readable) &#x2192; Promise(Object) <a href="https://github.com/iarna/iarna-toml/blob/latest/examples/parse-stream-readable.js" target="_blank" rel="noopener">(example)</a></h3>
<p>Also available with: <code>require(&apos;@iarna/toml/parse-stream&apos;)</code></p>
<p>Given a readable stream, parse it as it feeds us data. Return a promise of the resulting object.</p>
<h3>readable.pipe(TOML.parse.stream()) &#x2192; Transform <a href="https://github.com/iarna/iarna-toml/blob/latest/examples/parse-stream-through.js" target="_blank" rel="noopener">(example)</a></h3>
<p>Also available with: <code>require(&apos;@iarna/toml/parse-stream&apos;)</code></p>
<p>Returns a transform stream in object mode.  When it completes, emit the
resulting object. Only one object will ever be emitted.</p>
<h2>Lowlevel Interface <a href="https://github.com/iarna/iarna-toml/blob/latest/examples/parse-lowlevel.js" target="_blank" rel="noopener">(example)</a> <a href="https://github.com/iarna/iarna-toml/blob/latest/examples/parse-lowlevel-debug.js" target="_blank" rel="noopener">(example w/ parser debugging)</a></h2>
<p>You construct a parser object, per TOML file you want to process:</p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> TOMLParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;@iarna/toml/lib/toml-parser.js&apos;</span>)
<span class="hljs-keyword">const</span> parser = <span class="hljs-keyword">new</span> TOMLParser()
</code></pre>
<p>Then you call the <code>parse</code> method for each chunk as you read them, or in a
single call:</p>
<pre class="hljs"><code>parser.parse(<span class="hljs-string">`hello = &apos;world&apos;`</span>)
</code></pre>
<p>And finally, you call the <code>finish</code> method to complete parsing and retrieve
the resulting object.</p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> data = parser.finish()
</code></pre>
<p>Both the <code>parse</code> method and <code>finish</code> method will throw if they find a
problem with the string they were given.  Error objects thrown from the
parser have <code>pos</code>, <code>line</code> and <code>col</code> attributes.  <code>TOML.parse</code> adds a visual
summary of where in the source string there were issues using
<code>parse-pretty-error</code> and you can too:</p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> prettyError = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./parse-pretty-error.js&apos;</span>)
<span class="hljs-keyword">const</span> newErr = prettyError(err, sourceString)
</code></pre>
<h2>What&apos;s Different</h2>
<p>Version 2 of this module supports TOML 0.5.0.  Other modules currently
published to the npm registry support 0.4.0.  0.5.0 is mostly backwards
compatible with 0.4.0, but if you have need, you can install @iarna/toml@1
to get a version of this module that supports 0.4.0.  Please see the
<a href="CHANGELOG.md#2.0.0">CHANGELOG</a> for details on exactly whats changed.</p>
<h2>TOML we can&apos;t do</h2>
<ul>
<li><code>-nan</code> is a valid TOML value and is converted into <code>NaN</code>. There is no way to
produce <code>-nan</code> when stringifying. Stringification will produce positive <code>nan</code>.</li>
<li>Detecting and erroring on invalid utf8 documents: This is because Node&apos;s
UTF8 processing converts invalid sequences into the placeholder character
and does not have facilities for reporting these as errors instead.  We
<em>can</em> detect the placeholder character, but it&apos;s valid to intentionally
include them in documents, so erroring on them is not great.</li>
<li>On versions of Node &lt; 10, very large Integer values will lose precision.
On Node &gt;=10, bigints are used.</li>
<li>Floating/local dates and times are still represented by JavaScript Date
objects, which don&apos;t actually support these concepts. The objects
returned have been modified so that you can determine what kind of thing
they are (with <code>isFloating</code>, <code>isDate</code>, <code>isTime</code> properties) and that
their ISO representation (via <code>toISOString</code>) is representative of their
TOML value.  They will correctly round trip if you pass them to
<code>TOML.stringify</code>.</li>
<li>Binary, hexadecimal and octal values are converted to ordinary integers and
will be decimal if you stringify them.</li>
</ul>
<h2>Changes</h2>
<p>I write a by hand, honest-to-god,
<a href="https://github.com/iarna/iarna-toml/blob/latest/CHANGELOG.md" target="_blank" rel="noopener">CHANGELOG</a>
for this project.  It&apos;s a description of what went into a release that you
the consumer of the module could care about, not a list of git commits, so
please check it out!</p>
<h2>Benchmarks</h2>
<p>You can run them yourself with:</p>
<pre class="hljs"><code><span class="hljs-meta">$</span><span class="bash"> npm run benchmark</span>
</code></pre>
<p>The results below are from my desktop using Node 13.13.0.  The library
versions tested were <code>@iarna/toml@2.2.4</code>, <code>toml-j0.4@1.1.1</code>, <code>toml@3.0.0</code>,
<code>@sgarciac/bombadil@2.3.0</code>, <code>@ltd/j-toml@0.5.107</code>, and <code>fast-toml@0.5.4</code>.  The speed value is
megabytes-per-second that the parser can process of that document type.
Bigger is better. The percentage after average results is the margin of error.</p>
<p>New here is fast-toml. fast-toml is very fast, for some datatypes, but it
also is missing most error checking demanded by the spec.  For 0.4, it is
complete except for detail of multiline strings caught by the compliance
tests.  Its support for 0.5 is incomplete.  Check out the
<a href="https://shared.by.re-becca.org/misc/TOML-SPEC-SUPPORT.html" target="_blank" rel="noopener">spec compliance</a> doc
for details.</p>
<p>As this table is getting a little wide, with how npm and github display it,
you can also view it seperately in the
<a href="https://shared.by.re-becca.org/misc/BENCHMARK.html" target="_blank" rel="noopener">BENCHMARK</a> document.</p>
<table>
<thead>
<tr>
<th></th>
<th style="text-align:center">@iarna/<wbr>toml</th>
<th style="text-align:center">toml-j0.4</th>
<th style="text-align:center">toml</th>
<th style="text-align:center">@sgarciac/<wbr>bombadil</th>
<th style="text-align:center">@ltd/<wbr>j-toml</th>
<th style="text-align:center">fast-toml</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Overall</strong></td>
<td style="text-align:center">28MB/sec<br><small>0.35%</small></td>
<td style="text-align:center">6.5MB/sec<br><small>0.25%</small></td>
<td style="text-align:center">0.2MB/sec<br><small>0.70%</small></td>
<td style="text-align:center">-</td>
<td style="text-align:center">35MB/sec<br><small>0.23%</small></td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td><strong>Spec Example: v0.4.0</strong></td>
<td style="text-align:center">26MB/sec<br><small>0.37%</small></td>
<td style="text-align:center">10MB/sec<br><small>0.27%</small></td>
<td style="text-align:center">1MB/sec<br><small>0.42%</small></td>
<td style="text-align:center">1.2MB/sec<br><small>0.95%</small></td>
<td style="text-align:center">28MB/sec<br><small>0.31%</small></td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td><strong>Spec Example: Hard Unicode</strong></td>
<td style="text-align:center">64MB/sec<br><small>0.59%</small></td>
<td style="text-align:center">18MB/sec<br><small>0.12%</small></td>
<td style="text-align:center">2MB/sec<br><small>0.20%</small></td>
<td style="text-align:center">0.6MB/sec<br><small>0.53%</small></td>
<td style="text-align:center">68MB/sec<br><small>0.31%</small></td>
<td style="text-align:center">78MB/sec<br><small>0.28%</small></td>
</tr>
<tr>
<td><strong>Types: Array, Inline</strong></td>
<td style="text-align:center">7.3MB/sec<br><small>0.60%</small></td>
<td style="text-align:center">4MB/sec<br><small>0.16%</small></td>
<td style="text-align:center">0.1MB/sec<br><small>0.91%</small></td>
<td style="text-align:center">1.3MB/sec<br><small>0.81%</small></td>
<td style="text-align:center">10MB/sec<br><small>0.35%</small></td>
<td style="text-align:center">9MB/sec<br><small>0.16%</small></td>
</tr>
<tr>
<td><strong>Types: Array</strong></td>
<td style="text-align:center">6.8MB/sec<br><small>0.19%</small></td>
<td style="text-align:center">6.7MB/sec<br><small>0.15%</small></td>
<td style="text-align:center">0.2MB/sec<br><small>0.79%</small></td>
<td style="text-align:center">1.2MB/sec<br><small>0.93%</small></td>
<td style="text-align:center">8.8MB/sec<br><small>0.47%</small></td>
<td style="text-align:center">27MB/sec<br><small>0.21%</small></td>
</tr>
<tr>
<td><strong>Types: Boolean,</strong></td>
<td style="text-align:center">21MB/sec<br><small>0.20%</small></td>
<td style="text-align:center">9.4MB/sec<br><small>0.17%</small></td>
<td style="text-align:center">0.2MB/sec<br><small>0.96%</small></td>
<td style="text-align:center">1.8MB/sec<br><small>0.70%</small></td>
<td style="text-align:center">16MB/sec<br><small>0.20%</small></td>
<td style="text-align:center">8.4MB/sec<br><small>0.22%</small></td>
</tr>
<tr>
<td><strong>Types: Datetime</strong></td>
<td style="text-align:center">18MB/sec<br><small>0.14%</small></td>
<td style="text-align:center">11MB/sec<br><small>0.15%</small></td>
<td style="text-align:center">0.3MB/sec<br><small>0.85%</small></td>
<td style="text-align:center">1.6MB/sec<br><small>0.45%</small></td>
<td style="text-align:center">9.8MB/sec<br><small>0.48%</small></td>
<td style="text-align:center">6.5MB/sec<br><small>0.23%</small></td>
</tr>
<tr>
<td><strong>Types: Float</strong></td>
<td style="text-align:center">8.8MB/sec<br><small>0.09%</small></td>
<td style="text-align:center">5.9MB/sec<br><small>0.14%</small></td>
<td style="text-align:center">0.2MB/sec<br><small>0.51%</small></td>
<td style="text-align:center">2.1MB/sec<br><small>0.82%</small></td>
<td style="text-align:center">14MB/sec<br><small>0.15%</small></td>
<td style="text-align:center">7.9MB/sec<br><small>0.14%</small></td>
</tr>
<tr>
<td><strong>Types: Int</strong></td>
<td style="text-align:center">5.9MB/sec<br><small>0.11%</small></td>
<td style="text-align:center">4.5MB/sec<br><small>0.28%</small></td>
<td style="text-align:center">0.1MB/sec<br><small>0.78%</small></td>
<td style="text-align:center">1.5MB/sec<br><small>0.64%</small></td>
<td style="text-align:center">10MB/sec<br><small>0.14%</small></td>
<td style="text-align:center">8MB/sec<br><small>0.17%</small></td>
</tr>
<tr>
<td><strong>Types: Literal String, 7 char</strong></td>
<td style="text-align:center">26MB/sec<br><small>0.29%</small></td>
<td style="text-align:center">8.5MB/sec<br><small>0.32%</small></td>
<td style="text-align:center">0.3MB/sec<br><small>0.84%</small></td>
<td style="text-align:center">2.3MB/sec<br><small>1.02%</small></td>
<td style="text-align:center">23MB/sec<br><small>0.15%</small></td>
<td style="text-align:center">13MB/sec<br><small>0.15%</small></td>
</tr>
<tr>
<td><strong>Types: Literal String, 92 char</strong></td>
<td style="text-align:center">46MB/sec<br><small>0.19%</small></td>
<td style="text-align:center">11MB/sec<br><small>0.20%</small></td>
<td style="text-align:center">0.3MB/sec<br><small>0.56%</small></td>
<td style="text-align:center">12MB/sec<br><small>0.92%</small></td>
<td style="text-align:center">101MB/sec<br><small>0.17%</small></td>
<td style="text-align:center">75MB/sec<br><small>0.29%</small></td>
</tr>
<tr>
<td><strong>Types: Literal String, Multiline, 1079 char</strong></td>
<td style="text-align:center">22MB/sec<br><small>0.42%</small></td>
<td style="text-align:center">6.7MB/sec<br><small>0.55%</small></td>
<td style="text-align:center">0.9MB/sec<br><small>0.78%</small></td>
<td style="text-align:center">44MB/sec<br><small>1.00%</small></td>
<td style="text-align:center">350MB/sec<br><small>0.16%</small></td>
<td style="text-align:center">636MB/sec<br><small>0.16%</small></td>
</tr>
<tr>
<td><strong>Types: Basic String, 7 char</strong></td>
<td style="text-align:center">25MB/sec<br><small>0.15%</small></td>
<td style="text-align:center">7.3MB/sec<br><small>0.18%</small></td>
<td style="text-align:center">0.2MB/sec<br><small>0.96%</small></td>
<td style="text-align:center">2.2MB/sec<br><small>1.09%</small></td>
<td style="text-align:center">14MB/sec<br><small>0.16%</small></td>
<td style="text-align:center">12MB/sec<br><small>0.22%</small></td>
</tr>
<tr>
<td><strong>Types: Basic String, 92 char</strong></td>
<td style="text-align:center">43MB/sec<br><small>0.30%</small></td>
<td style="text-align:center">7.2MB/sec<br><small>0.16%</small></td>
<td style="text-align:center">0.1MB/sec<br><small>4.04%</small></td>
<td style="text-align:center">12MB/sec<br><small>1.33%</small></td>
<td style="text-align:center">71MB/sec<br><small>0.19%</small></td>
<td style="text-align:center">70MB/sec<br><small>0.23%</small></td>
</tr>
<tr>
<td><strong>Types: Basic String, 1079 char</strong></td>
<td style="text-align:center">24MB/sec<br><small>0.45%</small></td>
<td style="text-align:center">5.8MB/sec<br><small>0.17%</small></td>
<td style="text-align:center">0.1MB/sec<br><small>3.64%</small></td>
<td style="text-align:center">44MB/sec<br><small>1.05%</small></td>
<td style="text-align:center">93MB/sec<br><small>0.29%</small></td>
<td style="text-align:center">635MB/sec<br><small>0.28%</small></td>
</tr>
<tr>
<td><strong>Types: Table, Inline</strong></td>
<td style="text-align:center">9.7MB/sec<br><small>0.10%</small></td>
<td style="text-align:center">5.5MB/sec<br><small>0.22%</small></td>
<td style="text-align:center">0.1MB/sec<br><small>0.87%</small></td>
<td style="text-align:center">1.4MB/sec<br><small>1.18%</small></td>
<td style="text-align:center">8.7MB/sec<br><small>0.60%</small></td>
<td style="text-align:center">8.7MB/sec<br><small>0.22%</small></td>
</tr>
<tr>
<td><strong>Types: Table</strong></td>
<td style="text-align:center">7.1MB/sec<br><small>0.14%</small></td>
<td style="text-align:center">5.6MB/sec<br><small>0.42%</small></td>
<td style="text-align:center">0.1MB/sec<br><small>0.65%</small></td>
<td style="text-align:center">1.4MB/sec<br><small>1.11%</small></td>
<td style="text-align:center">7.4MB/sec<br><small>0.70%</small></td>
<td style="text-align:center">18MB/sec<br><small>0.20%</small></td>
</tr>
<tr>
<td><strong>Scaling: Array, Inline, 1000 elements</strong></td>
<td style="text-align:center">40MB/sec<br><small>0.21%</small></td>
<td style="text-align:center">2.4MB/sec<br><small>0.19%</small></td>
<td style="text-align:center">0.1MB/sec<br><small>0.35%</small></td>
<td style="text-align:center">1.6MB/sec<br><small>1.02%</small></td>
<td style="text-align:center">17MB/sec<br><small>0.15%</small></td>
<td style="text-align:center">32MB/sec<br><small>0.16%</small></td>
</tr>
<tr>
<td><strong>Scaling: Array, Nested, 1000 deep</strong></td>
<td style="text-align:center">2MB/sec<br><small>0.15%</small></td>
<td style="text-align:center">1.7MB/sec<br><small>0.26%</small></td>
<td style="text-align:center">0.3MB/sec<br><small>0.58%</small></td>
<td style="text-align:center">-</td>
<td style="text-align:center">1.8MB/sec<br><small>0.74%</small></td>
<td style="text-align:center">13MB/sec<br><small>0.20%</small></td>
</tr>
<tr>
<td><strong>Scaling: Literal String, 40kb</strong></td>
<td style="text-align:center">61MB/sec<br><small>0.18%</small></td>
<td style="text-align:center">10MB/sec<br><small>0.15%</small></td>
<td style="text-align:center">3MB/sec<br><small>0.84%</small></td>
<td style="text-align:center">12MB/sec<br><small>0.51%</small></td>
<td style="text-align:center">551MB/sec<br><small>0.44%</small></td>
<td style="text-align:center">19kMB/sec<br><small>0.19%</small></td>
</tr>
<tr>
<td><strong>Scaling: Literal String, Multiline, 40kb</strong></td>
<td style="text-align:center">62MB/sec<br><small>0.16%</small></td>
<td style="text-align:center">5MB/sec<br><small>0.45%</small></td>
<td style="text-align:center">0.2MB/sec<br><small>1.70%</small></td>
<td style="text-align:center">11MB/sec<br><small>0.74%</small></td>
<td style="text-align:center">291MB/sec<br><small>0.24%</small></td>
<td style="text-align:center">21kMB/sec<br><small>0.22%</small></td>
</tr>
<tr>
<td><strong>Scaling: Basic String, Multiline, 40kb</strong></td>
<td style="text-align:center">62MB/sec<br><small>0.18%</small></td>
<td style="text-align:center">5.8MB/sec<br><small>0.38%</small></td>
<td style="text-align:center">2.9MB/sec<br><small>0.86%</small></td>
<td style="text-align:center">11MB/sec<br><small>0.41%</small></td>
<td style="text-align:center">949MB/sec<br><small>0.44%</small></td>
<td style="text-align:center">26kMB/sec<br><small>0.16%</small></td>
</tr>
<tr>
<td><strong>Scaling: Basic String, 40kb</strong></td>
<td style="text-align:center">59MB/sec<br><small>0.20%</small></td>
<td style="text-align:center">6.3MB/sec<br><small>0.17%</small></td>
<td style="text-align:center">0.2MB/sec<br><small>1.95%</small></td>
<td style="text-align:center">12MB/sec<br><small>0.44%</small></td>
<td style="text-align:center">508MB/sec<br><small>0.35%</small></td>
<td style="text-align:center">18kMB/sec<br><small>0.15%</small></td>
</tr>
<tr>
<td><strong>Scaling: Table, Inline, 1000 elements</strong></td>
<td style="text-align:center">28MB/sec<br><small>0.12%</small></td>
<td style="text-align:center">8.2MB/sec<br><small>0.19%</small></td>
<td style="text-align:center">0.3MB/sec<br><small>0.89%</small></td>
<td style="text-align:center">2.3MB/sec<br><small>1.14%</small></td>
<td style="text-align:center">5.3MB/sec<br><small>0.24%</small></td>
<td style="text-align:center">13MB/sec<br><small>0.20%</small></td>
</tr>
<tr>
<td><strong>Scaling: Table, Inline, Nested, 1000 deep</strong></td>
<td style="text-align:center">7.8MB/sec<br><small>0.28%</small></td>
<td style="text-align:center">5MB/sec<br><small>0.20%</small></td>
<td style="text-align:center">0.1MB/sec<br><small>0.84%</small></td>
<td style="text-align:center">-</td>
<td style="text-align:center">3.2MB/sec<br><small>0.52%</small></td>
<td style="text-align:center">10MB/sec<br><small>0.23%</small></td>
</tr>
</tbody>
</table>
<h2>Tests</h2>
<p>The test suite is maintained at 100% coverage: <a href="https://coveralls.io/github/iarna/iarna-toml" target="_blank" rel="noopener"><img src="https://coveralls.io/repos/github/iarna/iarna-toml/badge.svg" alt="Coverage Status"></a></p>
<p>The spec was carefully hand converted into a series of test framework
independent (and mostly language independent) assertions, as pairs of TOML
and YAML files.  You can find those files here:
<a href="https://github.com/iarna/iarna-toml/blob/latest/test/spec-test/" target="_blank" rel="noopener">spec-test</a>.
A number of examples of invalid Unicode were also written, but are difficult
to make use of in Node.js where Unicode errors are silently hidden.  You can
find those here: <a href="https://github.com/iarna/iarna-toml/blob/latest/test/spec-test-disabled/" target="_blank" rel="noopener">spec-test-disabled</a>.</p>
<p>Further tests were written to increase coverage to 100%, these may be more
implementation specific, but they can be found in <a href="https://github.com/iarna/iarna-toml/blob/latest/test/coverage.js" target="_blank" rel="noopener">coverage</a> and
<a href="https://github.com/iarna/iarna-toml/blob/latest/test/coverage-error.js" target="_blank" rel="noopener">coverage-error</a>.</p>
<p>I&apos;ve also written some quality assurance style tests, which don&apos;t contribute
to coverage but do cover scenarios that could easily be problematic for some
implementations can be found in:
<a href="https://github.com/iarna/iarna-toml/blob/latest/test/qa.js" target="_blank" rel="noopener">test/qa.js</a> and
<a href="https://github.com/iarna/iarna-toml/blob/latest/test/qa-error.js" target="_blank" rel="noopener">test/qa-error.js</a>.</p>
<p>All of the official example files from the TOML spec are run through this
parser and compared to the official YAML files when available. These files are from the TOML spec as of:
<a href="https://github.com/toml-lang/toml/tree/357a4ba6782e48ff26e646780bab11c90ed0a7bc" target="_blank" rel="noopener">357a4ba6</a>
and specifically are:</p>
<ul>
<li><a href="https://github.com/toml-lang/toml/tree/357a4ba6782e48ff26e646780bab11c90ed0a7bc/examples" target="_blank" rel="noopener">github.com/toml-lang/toml/tree/357a4ba6/examples</a></li>
<li><a href="https://github.com/toml-lang/toml/tree/357a4ba6782e48ff26e646780bab11c90ed0a7bc/tests" target="_blank" rel="noopener">github.com/toml-lang/toml/tree/357a4ba6/tests</a></li>
</ul>
<p>The stringifier is tested by round-tripping these same files, asserting that
<code>TOML.parse(sourcefile)</code> deepEqual
<code>TOML.parse(TOML.stringify(TOML.parse(sourcefile))</code>.  This is done in
<a href="https://github.com/iarna/iarna-toml/blob/latest/test/round-tripping.js" target="_blank" rel="noopener">test/roundtrip-examples.js</a>
There are also some tests written to complete coverage from stringification in:
<a href="https://github.com/iarna/iarna-toml/blob/latest/test/stringify.js" target="_blank" rel="noopener">test/stringify.js</a></p>
<p>Tests for the async and streaming interfaces are in <a href="https://github.com/iarna/iarna-toml/blob/latest/test/async.js" target="_blank" rel="noopener">test/async.js</a> and <a href="https://github.com/iarna/iarna-toml/blob/latest/test/stream.js" target="_blank" rel="noopener">test/stream.js</a> respectively.</p>
<p>Tests for the parsers debugging mode live in <a href="https://github.com/iarna/iarna-toml/blob/latest/test/devel.js" target="_blank" rel="noopener">test/devel.js</a>.</p>
<p>And finally, many more stringification tests were borrowed from <a href="https://github.com/othiym23" target="_blank" rel="noopener">@othiym23</a>&apos;s
<a href="https://npmjs.com/package/toml-stream" target="_blank" rel="noopener">toml-stream</a> module. They were fetched as of
<a href="https://github.com/othiym23/toml-stream/tree/b6f1e26b572d49742d49fa6a6d11524d003441fa/test" target="_blank" rel="noopener">b6f1e26b572d49742d49fa6a6d11524d003441fa</a> and live in
<a href="https://github.com/iarna/iarna-toml/blob/latest/test/toml-stream/" target="_blank" rel="noopener">test/toml-stream</a>.</p>
<h2>Improvements to make</h2>
<ul>
<li>In stringify:
<ul>
<li>Any way to produce comments.  As a JSON stand-in I&apos;m not too worried
about this.  That said, a document orientated fork is something I&apos;d like
to look at eventually&#x2026;</li>
<li>Stringification could use some work on its error reporting.  It reports
<em>what&apos;s</em> wrong, but not where in your data structure it was.</li>
</ul>
</li>
<li>Further optimize the parser:
<ul>
<li>There are some debugging assertions left in the main parser, these should be moved to a subclass.</li>
<li>Make the whole debugging parser thing work as a mixin instead of as a superclass.</li>
</ul>
</li>
</ul>
</body></html></div>
        </main>
      </div>
    </div>
<footer class="app-footer text-md-left text-center">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-2 mb-md-0 mb-4">
        <span class="pr-md-5 pr-0 py-3">
          <a href="https://runtimeverification.com" target="_blank">
            <picture>
              <source
                srcset="../../../../assets/img/rv-logo-dark.png"
                media="(prefers-color-scheme: dark)"
              />
              <img
                class="pr-3 footer-logo"
                src="../../../../assets/img/rv-logo.png"
                alt="Runtime Verification Inc logo"
              />
            </picture>
          </a>
        </span>
      </div>
      <div class="col-md-6 mb-md-0 mb-4"></div>
      <div class="col-md-4 text-md-right">
        <p class="copyright">
          &copy; 2020 Runtime Verification Inc. All right reserved.
        </p>
      </div>
    </div>
  </div>
</footer>

<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=UA-163311512-1"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "UA-163311512-1");
</script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Typist/1.2/typist.min.js"></script>
    <script src="../../../../assets/js/index.js"></script>
  </body>
</html>
