<!DOCTYPE html>
<html lang="en">
  <head>
<meta charset="utf-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
/>
<meta
  name="description"
  content="Design and implement your programming language and software analysis tools with mathematical rigor."
/>
<meta name="keywords" content="runtime, verification, rv, k" />
<meta name="author" content="IELE Semantics | Runtime Verification Inc" />
<meta name="robots" content="index, follow" />

<!--favicon icon-->
<link rel="icon" type="image/png" href="../../../../../assets/img/favicon.ico" />

<title>IELE Semantics | Runtime Verification Inc</title>

<!-- <base href="/k/" /> -->

<!--web fonts-->
<link
  href="https://fonts.googleapis.com/css?family=Nunito:300,400,600,700,800"
  rel="stylesheet"
/>
<link
  href="https://fonts.googleapis.com/css?family=Lora:400i"
  rel="stylesheet"
/>

<link
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"
  rel="stylesheet"
/>

<link href="../../../../../assets/css/index.css" rel="stylesheet" />

<!--[if (gt IE 9) |!(IE)]><!-->
<!--<link rel="stylesheet" href="/assets/vendor/custom-nav/css/effects/fade-menu.css"/>-->
<!-- <link rel="stylesheet" href="../../../../../assets/k/vl-nav/css/effects/slide-menu.css" /> -->
<!--<![endif]-->

  </head>

  <body>
<header
  class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar"
>
  <a class="logo-link" href="../../../../../index.html">
    <img
      class="logo-dark"
      srcset="../../../../../assets/img/iele-logo.png"
      alt="K"
      style="height: 48px"
    />
    Semantic Framework
  </a>
  <ul class="navbar-nav ml-md-auto">
    <li class="nav-item">
      <a
        class="nav-link pl-2 pr-1 mx-1 py-3 my-n2"
        href="https://github.com/runtimeverification/iele-semantics"
        target="_blank"
        rel="noopener"
        aria-label="GitHub"
      >
        <i class="fab fa-github"></i>
      </a>
    </li>
  </ul>
  <a
    class="btn btn-rv-blue d-none d-lg-inline-block mb-3 mb-md-0 ml-md-3"
    href="../../../../../downloads"
    >Download</a
  >
</header>


    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 bd-sidebar mb-3">
  <form
    role="search"
    class="bd-search d-flex align-items-center justify-content-between"
  >
    <input
      type="search"
      class="form-control"
      placeholder="Search..."
      aria-label="Search for..."
      autocomplete="false"
      id="search-box"
    />
    <button
      class="btn bd-search-docs-toggle d-md-none p-0 ml-3 collapsed"
      type="button"
      aria-label="Toggle docs navigation"
      style="font-size: 1.4rem"
    >
      <i class="fas fa-bars"></i>
    </button>
  </form>
  <nav class="collapse bd-links" aria-label="Main navigation">
    <div class="bd-toc-item">
      <a class="bd-toc-link" href="../../../../../">Homepage</a>
      <a class="bd-toc-link" href="../../../../../INSTALL">Install</a>
      <a class="bd-toc-link" href="../../../../../Design">Design</a>
    </div>
  </nav>
</div>

        <main
          class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content"
          role="main"
        >
          <div class="markdown-preview"><html><head></head><body><h1>Guide</h1>
<p>This guide should get you going with EventEmitter. Once finished you may wish to learn more about the script and use methods that are not shown here. At that point you should either browse <a href="https://github.com/Olical/EventEmitter/blob/master/docs/api.md" target="_blank" rel="noopener">the API documentation</a> or have a look around <a href="https://github.com/Olical/EventEmitter/blob/master/EventEmitter.js" target="_blank" rel="noopener">the source</a>.</p>
<h2>Getting a copy of the script</h2>
<h3>Cloning the full source as a submodule</h3>
<pre class="hljs"><code>git submodule add git://github.com/Olical/EventEmitter.git assets/js/EventEmitter
</code></pre>
<p>This will copy the whole repository, including all documentation and build scripts. Obviously you must replace the destination directory with your desired location.</p>
<h3>Downloading a minified version</h3>
<p>You can get pre-built versions of EventEmitter from <a href="https://github.com/Olical/EventEmitter/downloads" target="_blank" rel="noopener">the downloads page</a>. I would recommend using the latest version. It&apos;s the latest for a reason.</p>
<h3>Installing the component with Bower</h3>
<p>EventEmitter can also be found in the <a href="https://github.com/twitter/bower" target="_blank" rel="noopener">Bower package manager</a>. You can install with the following line.</p>
<pre class="hljs"><code>bower install eventEmitter
</code></pre>
<p>You can also register EventEmitter as a dependency of your own Bower components for easy installation.</p>
<h2>Loading the script</h2>
<h3>Browser via script tag</h3>
<p>This is so obvious it hurts. Just remember to set the right path to load from.</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&apos;text/javascript&apos;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&apos;/assets/js/EventEmitter/EventEmitter.js&apos;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>Or maybe you want to load a minified version you downloaded...</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&apos;text/javascript&apos;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&apos;/assets/js/EventEmitter-VERSION.min.js&apos;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>You can then access it in your code like so.</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> ee = <span class="hljs-keyword">new</span> EventEmitter();
</code></pre>
<h3>Browser via AMD</h3>
<p>I love AMD, so I implemented it in EventEmitter. If the script is loaded into a page containing an AMD loader (such as <a href="http://requirejs.org/" target="_blank" rel="noopener">RequireJS</a>) then it will not be placed in the global namespace as it usually is. Instead it must be accessed via AMD like this.</p>
<pre class="hljs"><code><span class="hljs-built_in">require</span>([<span class="hljs-string">&apos;EventEmitter&apos;</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">EventEmitter</span>) </span>{
    <span class="hljs-keyword">var</span> ee = <span class="hljs-keyword">new</span> EventEmitter();
});
</code></pre>
<h3>node.js or Browser via Browserify</h3>
<p>This is pretty simple, just install the file via npm (or bower):</p>
<pre class="hljs"><code>npm install wolfy87-eventemitter --save
</code></pre>
<p>...and then require it (if you used bower you have to require the relative path to the bower component)</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> EventEmitter = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;wolfy87-eventemitter&apos;</span>);
<span class="hljs-keyword">var</span> ee = <span class="hljs-keyword">new</span> EventEmitter();
</code></pre>
<h2>Extending with the EventEmitter class</h2>
<p>You probably won&apos;t want to use EventEmitter as a raw class. You will probably want to write a <code>Player</code> class or something like that and implement EventEmitter&apos;s methods into it. To do this you will need to clone and merge EventEmitter&apos;s prototype object into your classes prototype object. Here is how I would do that with MooTools, I am sure there are alternatives for almost all other frameworks.</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Player</span>(<span class="hljs-params"></span>)</span>{}
Player.prototype = <span class="hljs-built_in">Object</span>.clone(EventEmitter.prototype);
</code></pre>
<p>If you do not want to use a huge framework like that then you might want to use this script I wrote, <a href="https://github.com/Olical/Heir" target="_blank" rel="noopener">Heir</a>. It just makes prototypical inheritance nice and easy. So here is how you would inherit EventEmitter&apos;s methods with Heir.</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Player</span>(<span class="hljs-params"></span>)</span>{}
heir.inherit(Player, EventEmitter);
</code></pre>
<p>That&apos;s all there is to it.</p>
<h2>Using EventEmitter</h2>
<p>So by now you should be able to download a copy of the script, load it into your page and either use it on it&apos;s own or implement it&apos;s methods into your own classes. Now you need to work out how to actually use the script.</p>
<p>For all of the following examples we are going to presume the following code has already been executed.</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> ee = <span class="hljs-keyword">new</span> EventEmitter();
</code></pre>
<p>This code simply creates an instance of EventEmitter to be used.</p>
<h3>Adding listeners</h3>
<p>A listener is a function that is executed when an event is emitted. You can add them in a multitude of ways, the simplest of which is with the <code>addListener</code> method.</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;The foo event has been emitted.&apos;</span>);
}

ee.addListener(<span class="hljs-string">&apos;foo&apos;</span>, listener);
</code></pre>
<p>You can also add in bulk using the <code>addListeners</code> method (notice the &quot;s&quot; on the end). You can interact with addListeners in two ways, the first is to pass it an event name and array of listeners to add.</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener1</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;ONE&apos;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener2</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;TWO&apos;</span>);
}

ee.addListeners(<span class="hljs-string">&apos;foo&apos;</span>, [listener1, listener2]);
</code></pre>
<p>The second way of calling addListeners involves passing an object of event names and listeners. You can either pass a single listener for each event or an array, just as you can see above.</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener1</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;ONE&apos;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener2</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;TWO&apos;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener3</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;THREE&apos;</span>);
}

ee.addListeners({
    <span class="hljs-attr">foo</span>: [listener1, listener2],
    <span class="hljs-attr">bar</span>: listener3
});
</code></pre>
<h3>Removing listeners</h3>
<p>This works in the <em>exact</em> same way as adding listeners. The only difference is that you replace the <code>add</code> in the method names with <code>remove</code>. Like this:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;The foo event has been emitted.&apos;</span>);
}

ee.addListener(<span class="hljs-string">&apos;foo&apos;</span>, listener);
ee.removeListener(<span class="hljs-string">&apos;foo&apos;</span>, listener);
</code></pre>
<p>If you want a listener to remove itself after it has been called or after a condition has been met then all you need to do is return true.</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener1</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// If a condition is met then remove the listener</span>
    <span class="hljs-keyword">if</span>(completed) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener2</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// Always remove after use</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

ee.addListeners(<span class="hljs-string">&apos;foo&apos;</span>, [listener1, listener2]);
ee.emitEvent(<span class="hljs-string">&apos;foo&apos;</span>);
</code></pre>
<p>If you do not want to, or can&apos;t for some reason, return true, you can set the return value using <code>setOnceReturnValue</code>.</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// Always remove after use</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">&apos;REMOVE-ME&apos;</span>;
}

ee.addListener(<span class="hljs-string">&apos;foo&apos;</span>, listener);
ee.setOnceReturnValue(<span class="hljs-string">&apos;REMOVE-ME&apos;</span>);
ee.emitEvent(<span class="hljs-string">&apos;foo&apos;</span>);
</code></pre>
<p>Alternatively you can use the <code>addOnceListener</code> method, or it&apos;s alias, <code>once</code>.</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// Do stuff</span>
}

ee.addOnceListener(<span class="hljs-string">&apos;foo&apos;</span>, listener);
ee.emitEvent(<span class="hljs-string">&apos;foo&apos;</span>);
<span class="hljs-comment">// The listener will be removed now...</span>
ee.emitEvent(<span class="hljs-string">&apos;foo&apos;</span>);

<span class="hljs-comment">// The listener will only be executed once.</span>
</code></pre>
<p>You can also remove whole events and all of their attached listeners with the <code>removeEvent</code> method. If you pass an event name to the method then it will remove that event and it&apos;s listeners.</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener1</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;ONE&apos;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener2</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;TWO&apos;</span>);
}

ee.addListeners(<span class="hljs-string">&apos;foo&apos;</span>, [listener1, listener2]);
ee.removeEvent(<span class="hljs-string">&apos;foo&apos;</span>);
</code></pre>
<p>However, if you leave it blank and do not pass an event name, then <strong>all</strong> events will be removed. It will wipe everything.</p>
<h3>Fetching the listeners</h3>
<p>If you really need to then you can get an array of all listeners attached to an event with the <code>getListeners</code> method.</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener1</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;ONE&apos;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener2</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;TWO&apos;</span>);
}

ee.addListeners(<span class="hljs-string">&apos;foo&apos;</span>, [listener1, listener2]);
ee.getListeners(<span class="hljs-string">&apos;foo&apos;</span>);
</code></pre>
<h3>Emitting events</h3>
<p>So once you have added your listeners and you are ready to start executing them, you can start to use the <code>emitEvent</code> method. At it&apos;s most basic level it will just execute all listeners attached to an event.</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener1</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;ONE&apos;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener2</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;TWO&apos;</span>);
}

ee.addListeners(<span class="hljs-string">&apos;foo&apos;</span>, [listener1, listener2]);
ee.emitEvent(<span class="hljs-string">&apos;foo&apos;</span>);
</code></pre>
<p>For more control, you can pass an arguments array as the second argument. This array will be applied to every listener as individual arguments.</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">adder</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-built_in">console</span>.log(a + b);
}

ee.addListener(<span class="hljs-string">&apos;addStuff&apos;</span>, adder);
ee.emitEvent(<span class="hljs-string">&apos;addStuff&apos;</span>, [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>]);
</code></pre>
<h3>Method aliases</h3>
<p><a href="https://github.com/Hebo" target="_blank" rel="noopener">Hebo</a>, from GitHub, <a href="https://github.com/Olical/EventEmitter/pull/35#issuecomment-9920932" target="_blank" rel="noopener">contributed three aliases</a> to add, remove and emit. The aliases can be found in the <a href="https://github.com/Olical/EventEmitter/blob/master/docs/api.md" target="_blank" rel="noopener">API documentation</a> but here is the mapping.</p>
<ul>
<li><code>on</code> - <code>addListener</code></li>
<li><code>off</code> - <code>removeListener</code></li>
<li><code>trigger</code> - <code>emitEvent</code></li>
</ul>
<p>I&apos;ve also added one since then.</p>
<ul>
<li><code>once</code> - <code>addOnceListener</code></li>
</ul>
<h3>Using regular expressions</h3>
<p>You can pass a regular expression to pretty much every function in EventEmitter in place of an event name string. So if you have two events, say, bar and baz, you can manipulate both of them with <code>/ba[rz]/</code>.</p>
<p>This applies to adding, removing and emitting events as well as a few others. There is one thing you have to remember when using this though, you must have the event defined before you use it in a regex.</p>
<p>By defined I mean, it has to have some other listener added to it, or you have to explicitly define it with the <code>defineEvent</code> / <code>defineEvents</code> functions. Here is an example of defining some events and adding to both with a regular expression.</p>
<pre class="hljs"><code>ee.defineEvents([<span class="hljs-string">&apos;bar&apos;</span>, <span class="hljs-string">&apos;baz&apos;</span>]);
ee.addListener(<span class="hljs-regexp">/ba[rz]/</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;Now you are thinking with regular expressions.&apos;</span>);
});
ee.emitEvent(<span class="hljs-regexp">/ba[rz]/</span>);
</code></pre>
</body></html></div>
        </main>
      </div>
    </div>
<footer class="app-footer text-md-left text-center">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-2 mb-md-0 mb-4">
        <span class="pr-md-5 pr-0 py-3">
          <a href="https://runtimeverification.com" target="_blank">
            <picture>
              <source
                srcset="../../../../../assets/img/rv-logo-dark.png"
                media="(prefers-color-scheme: dark)"
              />
              <img
                class="pr-3 footer-logo"
                src="../../../../../assets/img/rv-logo.png"
                alt="Runtime Verification Inc logo"
              />
            </picture>
          </a>
        </span>
      </div>
      <div class="col-md-6 mb-md-0 mb-4"></div>
      <div class="col-md-4 text-md-right">
        <p class="copyright">
          &copy; 2020 Runtime Verification Inc. All right reserved.
        </p>
      </div>
    </div>
  </div>
</footer>

<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=UA-163311512-1"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "UA-163311512-1");
</script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Typist/1.2/typist.min.js"></script>
    <script src="../../../../../assets/js/index.js"></script>
  </body>
</html>
